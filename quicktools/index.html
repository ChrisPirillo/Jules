<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tooltimate - The Glassomorphic Web Utility Hub</title>
    <meta name="description" content="A beautiful collection of 100+ free online web tools including calculators, converters, generators, and developers utilities. Built with glassmorphism design.">
    <meta name="keywords" content="web tools, online utilities, calculator, unit converter, password generator, base64 encoder, json formatter, free tools, glassmorphism">
    <meta name="author" content="Tooltimate">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://crystaltools.app/">
    <meta property="og:title" content="Tooltimate - 100+ Free Web Utilities">
    <meta property="og:description" content="Access 100+ essential web tools in one beautiful glassomorphic interface. Calculators, converters, dev tools, and more.">
    <meta property="og:image" content="https://crystaltools.app/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://crystaltools.app/">
    <meta property="twitter:title" content="Tooltimate - 100+ Free Web Utilities">
    <meta property="twitter:description" content="Access 100+ essential web tools in one beautiful glassomorphic interface. Calculators, converters, dev tools, and more.">
    <meta property="twitter:image" content="https://crystaltools.app/og-image.jpg">

    <link rel="canonical" href="https://crystaltools.app/">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Extra styles for tabs */
        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 0 20px 10px 20px; /* Add padding for scroll/visual */
        }
        .category-tab {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }
        .category-tab:hover, .category-tab.active {
            background: rgba(255,255,255,0.3);
            border-color: white;
        }

/* Uniform Height & UI Fixes */
.glass-input, .glass-select, .glass-btn, .glass-btn-primary {
    height: 44px !important;
    min-height: 44px;
    box-sizing: border-box;
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    margin: 0; /* Reset margins for alignment */
}

/* Ensure buttons in flex containers align with inputs */
.input-group {
    display: flex;
    flex-direction: column;
}

/* Category Tabs - No scroll on Desktop */
@media (min-width: 768px) {
    .category-tabs {
        flex-wrap: wrap;
        overflow-x: visible;
        justify-content: center;
    }
    .category-tab {
        flex: 0 1 auto; /* Allow shrinking if absolutely needed, but prefer wrap */
        font-size: 0.9rem;
        padding: 6px 12px;
    }
}

/* Mobile: Keep scrolling */
@media (max-width: 767px) {
    .category-tabs {
        justify-content: flex-start;
    }
}


/* --- Enhancements --- */


#content-area {
    height: 100%;
    overflow-y: auto;
    scrollbar-width: thin;
    padding-right: 10px;
}

#content-area.masked-scroll {
    mask-image: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);
    padding-top: 10px;
}

#content-area.masked-scroll {
    /* Mask to fade out content at the top as it scrolls */
    mask-image: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);



    padding-top: 10px; /* Space for the fade */
}

/* One-Line Categories (Desktop) */
@media (min-width: 768px) {
    .category-tabs {
        flex-wrap: nowrap !important;
        overflow-x: hidden !important; /* No scroll */
        justify-content: space-between;
        gap: 5px;
        padding: 0 10px 10px 10px;
    }
    .category-tab {
        flex: 1;
        text-align: center;
        padding: 8px 4px !important; /* Reduced padding */
        font-size: 0.8rem !important; /* Reduced font */
        min-width: 0; /* Allow shrinking below content size */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
}

/* Themed Components */
.glass-btn-primary {
    background: var(--theme-accent, linear-gradient(135deg, #667eea 0%, #764ba2 100%)) !important;
    border: 1px solid rgba(255,255,255,0.2) !important;
    color: var(--theme-text, white) !important;
}

.glass-input, .glass-select, .glass-textarea {
    background: var(--theme-bg-input, rgba(0,0,0,0.4)) !important;
    border-color: var(--theme-border, rgba(255,255,255,0.3)) !important;
}

.glass-btn:hover {
    background: var(--theme-accent-hover, rgba(255,255,255,0.35)) !important;
}

/* Tool Card Theme Support */
.tool-card {
    border-color: var(--theme-border, rgba(255,255,255,0.2)) !important;
}
.tool-card:hover {
    background: var(--theme-bg-hover, rgba(255,255,255,0.35)) !important;
    border-color: var(--theme-accent, white) !important;
}
.tool-card .icon {
    color: var(--theme-accent, #4f46e5) !important;
}


    /* UPDATED TOOL UI FIX */
    #tool-content {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: flex-start; /* Align top for long content */
        padding-top: 40px;
        width: 100%;
        overflow-y: auto;
    }

    .glass-panel {
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        padding: 40px;
        width: 100%;
        max-width: 600px !important; /* Increased from 500px */
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        margin: 0 auto; /* Force horizontal centering if flex fails */
    }

    .input-group label {
        font-size: 1rem;
        margin-bottom: 10px;
        font-weight: 500;
    }

    .glass-input, .glass-select, .glass-btn {
        height: 50px !important; /* Larger inputs */
        font-size: 1.1rem;
    }

</style>
<style>
:root {
    --primary-color: #4f46e5;
    --text-color: #1f2937;
    --text-light: #6b7280;
    --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

    /* Glassmorphism Variables */
    --glass-bg: rgba(255, 255, 255, 0.25);
    --glass-border: 1px solid rgba(255, 255, 255, 0.18);
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    --glass-blur: blur(10px);
    --glass-radius: 12px;

    /* Card Hover */
    --card-hover-bg: rgba(255, 255, 255, 0.35);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-gradient);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    color: var(--text-color);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 30px;
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

#app {
    width: 100%;
    max-width: 1200px;
    background: var(--glass-bg);
    box-shadow: 0 8px 32px 0 var(--theme-shadow, rgba(31, 38, 135, 0.37)); border-color: var(--theme-border, rgba(255, 255, 255, 0.18));
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: var(--glass-radius);
    border: var(--glass-border);
    padding: 30px;
    min-height: calc(100vh - 60px);
    display: flex;
    flex-direction: column;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 8px;
}
::-webkit-scrollbar-track {
    background: transparent;
}
::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}

/* Header Styles */
.glass-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 0 20px 0;
    border-bottom: none;
    margin-bottom: 20px;
}

.logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
    font-size: 1.2rem;
    color: white; /* Make logo white for better contrast on gradient */
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.search-bar input {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 8px 16px;
    border-radius: 20px;
    color: white;
    outline: none;
    backdrop-filter: blur(5px);
}
.search-bar input::placeholder {
    color: rgba(255, 255, 255, 0.7);
}

/* Layout Styles */
.main-container {
    display: flex;
    flex: 1;
    gap: 20px;
    overflow: hidden; /* Prevent scrolling issues */
}

#content-area.masked-scroll {
    flex: 1;
    overflow-y: auto;
    padding-right: 10px; /* Space for scrollbar */
}

.glass-sidebar {
    width: 250px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.glass-sidebar h3 {
    font-size: 1rem;
    margin-bottom: 10px;
    color: white;
    border-bottom: none;
    padding-bottom: 5px;
}

/* Dashboard Grid */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    padding: 20px 0;
}

.tool-card {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
}

.tool-card:hover {
    background: var(--card-hover-bg);
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    border-color: rgba(255, 255, 255, 0.4);
}

.tool-card .icon {
    width: 48px;
    height: 48px;
    margin-bottom: 15px;
    color: var(--primary-color);
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
}

.tool-card .icon svg {
    width: 100%;
    height: 100%;
    stroke: white; /* Make icons white for consistency */
}

.tool-card h3 {
    margin-bottom: 8px;
    font-size: 1.1rem;
    color: white;
}

.tool-card p {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.4;
}

/* Tool View Styles */
#tool-view {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.tool-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: none;
}

.glass-btn {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s;
    font-family: inherit;
    font-weight: 500;
}

.glass-btn:hover {
    background: rgba(255, 255, 255, 0.35);
}

#tool-title {
    color: white;
    font-size: 1.5rem;
}

#tool-content {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center; /* Align to top instead of center for better scrolling */
    padding-top: 20px;
}

/* Common Tool UI Elements */
.glass-panel {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    padding: 30px;
    width: 100%;
    max-width: 500px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.input-group {
    margin-bottom: 15px;
    width: 100%;
}

.input-group label {
    display: block;
    color: white;
    margin-bottom: 8px;
    font-size: 0.9rem;
}

.glass-input, .glass-select {
    width: 100%;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 15px;
    border-radius: 8px;
    color: white;
    font-family: inherit;
    font-size: 1rem;
    outline: none;
    transition: border-color 0.2s;
}

.glass-input:focus, .glass-select:focus {
    border-color: rgba(255, 255, 255, 0.5);
    background: rgba(0, 0, 0, 0.3);
}

.glass-btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    width: 100%;
    margin-top: 10px;
}

.glass-btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(118, 75, 162, 0.4);
}

/* Calculator Styles */
.calculator-container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    width: 320px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.calc-display {
    width: 100%;
    height: 70px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 10px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 15px;
    font-size: 2rem;
    color: white;
    font-family: 'Inter', monospace;
    overflow-x: auto;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.calc-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
}

.calc-btn {
    height: 55px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.calc-btn:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
}

.calc-btn.operator {
    background: rgba(79, 70, 229, 0.4); /* Primary color tint */
    border-color: rgba(79, 70, 229, 0.5);
}

.calc-btn.operator:hover {
    background: rgba(79, 70, 229, 0.6);
}

.calc-btn.equals {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    grid-column: span 2; /* Span 2 columns */
}

.calc-btn.clear {
    color: #ff6b6b;
    background: rgba(255, 107, 107, 0.15);
}

.calc-btn.clear:hover {
    background: rgba(255, 107, 107, 0.3);
}

/* Category Filter Tabs */
.category-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    overflow-x: auto;
    padding-bottom: 10px;
}

.category-tab {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
}

.category-tab:hover, .category-tab.active {
    background: rgba(255,255,255,0.3);
    border-color: white;
}

/* Text Tools Styles */
.glass-textarea {
    width: 100%;
    min-height: 200px;
    background: rgba(0,0,0,0.2);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 12px;
    padding: 15px;
    color: white;
    font-family: inherit;
    font-size: 1rem;
    resize: vertical;
    outline: none;
    margin-bottom: 20px;
}

.glass-textarea:focus {
    background: rgba(0,0,0,0.3);
    border-color: rgba(255,255,255,0.4);
}

/* Fix Layout Shift & Dynamic Theming Base */
#app {
    /* Existing: max-width: 1200px; width: 100%; ... */
    height: calc(100vh - 60px); /* Fixed height relative to viewport */
    overflow: hidden; /* Hide overflow on the container itself */
    position: relative;
    transition: background 0.5s ease, border-color 0.5s ease;
}

#content-area.masked-scroll {
    /* Existing: flex: 1; overflow-y: auto; */
    height: 100%; /* Fill available space */
    scrollbar-width: thin; /* Firefox */
}

/* Ensure tool content is centered but scrollable if too tall */
#tool-content {
    /* Existing: flex: 1; display: flex; justify-content: center; align-items: center; padding-top: 20px; */
    width: 100%;
    min-height: 0; /* Allow flex item to shrink */
}

/* Specific themes classes */
.theme-default {
    background: var(--glass-bg);
}

.theme-blue {
    background: rgba(79, 70, 229, 0.15);
    border-color: rgba(79, 70, 229, 0.3);
}

.theme-green {
    background: rgba(16, 185, 129, 0.15);
    border-color: rgba(16, 185, 129, 0.3);
}

.theme-purple {
    background: rgba(139, 92, 246, 0.15);
    border-color: rgba(139, 92, 246, 0.3);
}

.theme-orange {
    background: rgba(249, 115, 22, 0.15);
    border-color: rgba(249, 115, 22, 0.3);
}

.theme-pink {
    background: rgba(236, 72, 153, 0.15);
    border-color: rgba(236, 72, 153, 0.3);
}

.theme-red {
    background: rgba(239, 68, 68, 0.15);
    border-color: rgba(239, 68, 68, 0.3);
}

/* High Contrast Inputs */
.glass-input, .glass-textarea, .glass-select {
    color: #ffffff !important;
    background: rgba(0, 0, 0, 0.4) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

.glass-input::placeholder, .glass-textarea::placeholder {
    color: rgba(255, 255, 255, 0.6) !important;
}

/* Remove Logo Icon */
.logo svg {
    display: none !important;
}


/* Uniform Height & UI Fixes */
.glass-input, .glass-select, .glass-btn, .glass-btn-primary {
    height: 44px !important;
    min-height: 44px;
    box-sizing: border-box;
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    margin: 0; /* Reset margins for alignment */
}

/* Ensure buttons in flex containers align with inputs */
.input-group {
    display: flex;
    flex-direction: column;
}

/* Category Tabs - No scroll on Desktop */
@media (min-width: 768px) {
    .category-tabs {
        flex-wrap: wrap;
        overflow-x: visible;
        justify-content: center;
    }
    .category-tab {
        flex: 0 1 auto; /* Allow shrinking if absolutely needed, but prefer wrap */
        font-size: 0.9rem;
        padding: 6px 12px;
    }
}

/* Mobile: Keep scrolling */
@media (max-width: 767px) {
    .category-tabs {
        justify-content: flex-start;
    }
}


/* --- Enhancements --- */


#content-area {
    height: 100%;
    overflow-y: auto;
    scrollbar-width: thin;
    padding-right: 10px;
}

#content-area.masked-scroll {
    mask-image: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);
    padding-top: 10px;
}

#content-area.masked-scroll {
    /* Mask to fade out content at the top as it scrolls */
    mask-image: linear-gradient(to bottom, transparent 0%, black 20px, black calc(100% - 20px), transparent 100%);



    padding-top: 10px; /* Space for the fade */
}

/* One-Line Categories (Desktop) */
@media (min-width: 768px) {
    .category-tabs {
        flex-wrap: nowrap !important;
        overflow-x: hidden !important; /* No scroll */
        justify-content: space-between;
        gap: 5px;
        padding: 0 10px 10px 10px;
    }
    .category-tab {
        flex: 1;
        text-align: center;
        padding: 8px 4px !important; /* Reduced padding */
        font-size: 0.8rem !important; /* Reduced font */
        min-width: 0; /* Allow shrinking below content size */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
}

/* Themed Components */
.glass-btn-primary {
    background: var(--theme-accent, linear-gradient(135deg, #667eea 0%, #764ba2 100%)) !important;
    border: 1px solid rgba(255,255,255,0.2) !important;
    color: var(--theme-text, white) !important;
}

.glass-input, .glass-select, .glass-textarea {
    background: var(--theme-bg-input, rgba(0,0,0,0.4)) !important;
    border-color: var(--theme-border, rgba(255,255,255,0.3)) !important;
}

.glass-btn:hover {
    background: var(--theme-accent-hover, rgba(255,255,255,0.35)) !important;
}

/* Tool Card Theme Support */
.tool-card {
    border-color: var(--theme-border, rgba(255,255,255,0.2)) !important;
}
.tool-card:hover {
    background: var(--theme-bg-hover, rgba(255,255,255,0.35)) !important;
    border-color: var(--theme-accent, white) !important;
}
.tool-card .icon {
    color: var(--theme-accent, #4f46e5) !important;
}

</style>
</head>
<body>
    <div id="app">
        <header class="glass-header">
            <div class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                    <polyline points="2 17 12 22 22 17"></polyline>
                    <polyline points="2 12 12 17 22 12"></polyline>
                </svg>
                <h1 onclick="window.location.hash=''" style="cursor: pointer;">Tooltimate</h1>
                <span id="tool-count-badge" style="font-size: 0.8rem; background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 10px; margin-left: 10px; display: none;">0 Tools</span>
            </div>
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Search tools...">
            </div>
        </header>

        <nav class="category-tabs" id="category-tabs" aria-label="Tool Categories">
            <button class="category-tab active" data-cat="All">All</button>
            <button class="category-tab" data-cat="Text">Text</button>
            <button class="category-tab" data-cat="Math">Math</button>
            <button class="category-tab" data-cat="Finance">Finance</button>
            <button class="category-tab" data-cat="Dev">Developer</button>
            <button class="category-tab" data-cat="Converter">Converters</button>
            <button class="category-tab" data-cat="Random">Random</button>
            <button class="category-tab" data-cat="Time">Time</button>
            <button class="category-tab" data-cat="Security">Security</button>
            <button class="category-tab" data-cat="Color">Color</button>
            <button class="category-tab" data-cat="Health">Health</button>
            <button class="category-tab" data-cat="Science">Science</button>
            <button class="category-tab" data-cat="Image">Image</button>
            <button class="category-tab" data-cat="Misc">Misc</button>
        </nav>

        <div class="tool-header" id="tool-nav" style="display: none; padding: 0 10px 5px 10px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between;">
                        <button id="back-btn" class="glass-btn" aria-label="Back to Dashboard">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
                            Back
                        </button>
                        <h2 id="tool-title" style="flex: 1; text-align: center; margin: 0;">Tool Name</h2> <span id="tool-category-badge" style="margin-left: auto; background: rgba(255,255,255,0.1); padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; border: 1px solid rgba(255,255,255,0.2);">Category</span></div>
        <div class="main-container">
            <main id="content-area">
                <section id="dashboard" class="dashboard-grid">
                    <!-- Tools injected by script.js -->
                </section>

                <section id="tool-view" style="display: none;">

                    <div id="tool-content">
                        <!-- Tool content injected here -->
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        // Inline script for tabs logic
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.category-tab');
            const dashboard = document.getElementById('dashboard');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update active state
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    const cat = tab.getAttribute('data-cat');
                    filterByCategory(cat);

});

});

            function filterByCategory(category) {
                const cards = document.querySelectorAll('.tool-card');
                cards.forEach(card => {
                    const cardCat = card.getAttribute('data-category');
                    // Check if tool matches category (Health/Science might be new, ensure they work)
                    if (category === 'All' || cardCat === category || (!cardCat && category === 'All')) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }

});
            }

});
    </script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const dashboard = document.getElementById('dashboard');
    const toolView = document.getElementById('tool-view');
    const toolTitle = document.getElementById('tool-title');
    const toolContent = document.getElementById('tool-content');
    const backBtn = document.getElementById('back-btn');
    const searchInput = document.getElementById('search-input');
    const categoryTabs = document.getElementById('category-tabs');
    // --- Random Theming ---
    function setRandomTheme() {
        const hue = Math.floor(Math.random() * 360);
        const sat = Math.floor(Math.random() * 20) + 60;
        const light = Math.floor(Math.random() * 20) + 10;

        const primaryColor = `hsl(${hue}, ${sat}%, ${light}%)`;
        const accentColor = `hsl(${hue}, ${sat}%, ${light + 40}%)`;
        const bgInput = `hsla(${hue}, 30%, 10%, 0.6)`;
        const border = `hsla(${hue}, 50%, 50%, 0.3)`;
        const shadow = `hsla(${hue}, ${sat}%, ${light + 10}%, 0.3)`;

        const root = document.documentElement;
        root.style.setProperty('--primary-color', primaryColor);

        const hue2 = (hue + 40) % 360;
        const bgGradient = `linear-gradient(135deg, hsl(${hue}, 60%, 20%) 0%, hsl(${hue2}, 60%, 10%) 100%)`;
        root.style.setProperty('--bg-gradient', bgGradient);

        root.style.setProperty('--theme-accent', accentColor);
        root.style.setProperty('--theme-accent-hover', `hsl(${hue}, ${sat}%, ${light + 50}%)`);
        root.style.setProperty('--theme-bg-input', bgInput);
        root.style.setProperty('--theme-border', border);
        root.style.setProperty('--theme-shadow', shadow);
        root.style.setProperty('--theme-bg-hover', `hsla(${hue}, ${sat}%, 25%, 0.4)`);
    }
    const toolRegistry = {};
    function registerTool(id, name, category, description, icon, renderFn) {
        toolRegistry[id] = { name, category, description, icon, render: renderFn };
    }
    function createSimpleTextTool(id, name, category, description, transformFn) {
        registerTool(id, name, category, description,
            '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>',
            (container) => {
                const html = `
                    <div class="glass-panel" style="max-width: 800px;">
                        <textarea id="${id}-input" class="glass-textarea" placeholder="Enter text..."></textarea>
                        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                            <button id="${id}-action" class="glass-btn-primary" style="flex: 1;">${name}</button>
                            <button id="${id}-copy" class="glass-btn" style="flex: 1;">Copy Result</button>
                        </div>
                        <textarea id="${id}-output" class="glass-textarea" readonly placeholder="Result..."></textarea>
                    </div>
                `;
                container.innerHTML = html;
                const input = document.getElementById(`${id}-input`);
                const output = document.getElementById(`${id}-output`);
                const actionBtn = document.getElementById(`${id}-action`);
                const copyBtn = document.getElementById(`${id}-copy`);
                actionBtn.addEventListener('click', () => { try { output.value = transformFn(input.value); } catch (e) { output.value = "Error: " + e.message; }

});
                copyBtn.addEventListener('click', () => { if(output.value) { navigator.clipboard.writeText(output.value); const original = copyBtn.textContent; copyBtn.textContent = 'Copied!'; setTimeout(() => copyBtn.textContent = original, 1000); }

});
            }
        );
    }
    function createMathTool(id, name, category, description, inputs, calcFn) {
        registerTool(id, name, category, description,
            '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 21h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2z"/><line x1="9" y1="7" x2="15" y2="7"/><line x1="9" y1="11" x2="15" y2="11"/><line x1="9" y1="15" x2="15" y2="15"/></svg>',
            (container) => {
                let inputsHtml = '';
                inputs.forEach(inp => { inputsHtml += `<div class="input-group"><label>${inp.label}</label><input type="number" id="${id}-${inp.key}" class="glass-input" placeholder="${inp.placeholder || '0'}" step="any"></div>`;

});
                const html = `
                    <div class="glass-panel" style="max-width: 500px;">
                        ${inputsHtml}
                        <button id="${id}-calc" class="glass-btn-primary" style="margin-top: 10px;">Calculate</button>
                        <div style="margin-top: 20px; text-align: center;">
                            <label style="color:white; font-size: 0.9rem;">Result</label>
                            <div id="${id}-result" style="font-size: 2rem; color: white; font-weight: bold;">-</div>
                        </div>
                    </div>
                `;
                container.innerHTML = html;
                document.getElementById(`${id}-calc`).addEventListener('click', () => {
                    const values = {};
                    inputs.forEach(inp => { values[inp.key] = parseFloat(document.getElementById(`${id}-${inp.key}`).value) || 0;

});
                    const result = calcFn(values);
                    document.getElementById(`${id}-result`).textContent = result;

});
            }
        );
    }
    function createGeneratorTool(id, name, category, description, actionName, genFn) {
        registerTool(id, name, category, description,
            '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>',
            (container) => {
                const html = `
                    <div class="glass-panel" style="max-width: 500px; text-align: center;">
                        <button id="${id}-action" class="glass-btn-primary">${actionName}</button>
                        <div id="${id}-result" class="glass-textarea" style="margin-top: 20px; min-height: 100px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;"></div>
                        <button id="${id}-copy" class="glass-btn" style="margin-top: 10px; width: 100%;">Copy Result</button>
                    </div>
                `;
                container.innerHTML = html;
                const resDiv = document.getElementById(`${id}-result`);
                document.getElementById(`${id}-action`).addEventListener('click', () => { resDiv.textContent = genFn();

});
                document.getElementById(`${id}-copy`).addEventListener('click', () => { navigator.clipboard.writeText(resDiv.textContent);

});
            }
        );
    }
    createSimpleTextTool('uppercase', 'Uppercase', 'Text', 'Convert your text to uppercase letters instantly.', (text) => text.toUpperCase());
    createSimpleTextTool('lowercase', 'Lowercase', 'Text', 'Convert your text to lowercase letters instantly.', (text) => text.toLowerCase());
    createSimpleTextTool('title-case', 'Title Case', 'Text', 'Capitalize first letter of each word.', (text) => text.toLowerCase().split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' '));
    createSimpleTextTool('reverse-string', 'Reverse Text', 'Text', 'Reverse the characters in text.', (text) => text.split('').reverse().join(''));
    createSimpleTextTool('remove-spaces', 'Remove Spaces', 'Text', 'Remove all whitespace.', (text) => text.replace(/\s/g, ''));
    createSimpleTextTool('slugify', 'Slug Generator', 'Text', 'Convert text to URL slug.', (text) => text.toLowerCase().replace(/[^\w ]+/g, '').replace(/ +/g, '-'));
    createSimpleTextTool('base64-encode', 'Base64 Encode', 'Dev', 'Encode text to Base64.', (text) => btoa(text));
    createSimpleTextTool('base64-decode', 'Base64 Decode', 'Dev', 'Decode Base64 to text.', (text) => atob(text));
    createSimpleTextTool('url-encode', 'URL Encode', 'Dev', 'Encode text for URLs.', (text) => encodeURIComponent(text));
    createSimpleTextTool('url-decode', 'URL Decode', 'Dev', 'Decode URL encoded text.', (text) => decodeURIComponent(text));
    createSimpleTextTool('rot13', 'ROT13 Cipher', 'Text', 'Apply ROT13 substitution.', (text) => text.replace(/[a-zA-Z]/g, c => String.fromCharCode((c <= 'Z' ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26)));
    createSimpleTextTool('word-count', 'Word Count', 'Text', 'Count words in text.', (text) => `Words: ${text.trim().split(/\s+/).length}`);
    createSimpleTextTool('char-count', 'Char Count', 'Text', 'Count characters in text.', (text) => `Characters: ${text.length}`);
    createSimpleTextTool('camel-case', 'Camel Case', 'Text', 'Convert text to camelCase.', (text) => text.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g, (m, chr) => chr.toUpperCase()));
    createSimpleTextTool('snake-case', 'Snake Case', 'Text', 'Convert text to snake_case.', (text) => text && text.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(x => x.toLowerCase()).join('_'));
    createSimpleTextTool('kebab-case', 'Kebab Case', 'Text', 'Convert text to kebab-case.', (text) => text && text.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(x => x.toLowerCase()).join('-'));
    createSimpleTextTool('sentence-case', 'Sentence Case', 'Text', 'Convert text to Sentence case.', (text) => text.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, c => c.toUpperCase()));
    createSimpleTextTool('reverse-words', 'Reverse Words', 'Text', 'Reverse the order of words.', (text) => text.split(' ').reverse().join(' '));
    createSimpleTextTool('remove-duplicates', 'Remove Duplicate Lines', 'Text', 'Remove duplicate lines.', (text) => [...new Set(text.split('\n'))].join('\n'));
    createSimpleTextTool('sort-lines', 'Sort Lines (A-Z)', 'Text', 'Sort lines alphabetically.', (text) => text.split('\n').sort().join('\n'));
    createSimpleTextTool('sort-lines-reverse', 'Sort Lines (Z-A)', 'Text', 'Sort lines in reverse.', (text) => text.split('\n').sort().reverse().join('\n'));
    createSimpleTextTool('random-lines', 'Shuffle Lines', 'Text', 'Randomly shuffle lines.', (text) => text.split('\n').sort(() => Math.random() - 0.5).join('\n'));
    createSimpleTextTool('trim-lines', 'Trim Lines', 'Text', 'Trim whitespace from lines.', (text) => text.split('\n').map(l => l.trim()).join('\n'));
    createSimpleTextTool('remove-empty-lines', 'Remove Empty Lines', 'Text', 'Remove empty lines.', (text) => text.split('\n').filter(l => l.trim() !== '').join('\n'));
    createSimpleTextTool('add-line-numbers', 'Add Line Numbers', 'Text', 'Add line numbers to text.', (text) => text.split('\n').map((l, i) => `${i+1}. ${l}`).join('\n'));
    createSimpleTextTool('extract-emails', 'Extract Emails', 'Dev', 'Extract email addresses.', (text) => (text.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi) || []).join('\n'));
    createSimpleTextTool('extract-urls', 'Extract URLs', 'Dev', 'Extract URLs from text.', (text) => (text.match(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gi) || []).join('\n'));
    createSimpleTextTool('extract-numbers', 'Extract Numbers', 'Dev', 'Extract numbers from text.', (text) => (text.match(/\d+/g) || []).join('\n'));
    createSimpleTextTool('morse-code', 'Text to Morse', 'Text', 'Convert text to Morse code.', (text) => {
        const morseCode = { 'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-', 'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--', 'Z': '--..', '1': '.----', '2': '..---', '3': '...--', '4': '....-', '5': '.....', '6': '-....', '7': '--...', '8': '---..', '9': '----.', '0': '-----', ' ': '/' };
        return text.toUpperCase().split('').map(c => morseCode[c] || c).join(' ');

});
    createSimpleTextTool('binary-encode', 'Text to Binary', 'Dev', 'Convert text to binary.', (text) => text.split('').map(c => c.charCodeAt(0).toString(2).padStart(8, '0')).join(' '));
    createSimpleTextTool('hex-encode', 'Text to Hex', 'Dev', 'Convert text to hexadecimal.', (text) => text.split('').map(c => c.charCodeAt(0).toString(16).padStart(2, '0')).join(' '));
    createSimpleTextTool('ascii-encode', 'Text to ASCII', 'Dev', 'Convert text to ASCII codes.', (text) => text.split('').map(c => c.charCodeAt(0)).join(' '));
    createSimpleTextTool('csv-to-json', 'CSV to JSON', 'Dev', 'Simple CSV to JSON conversion.', (text) => {
        const lines = text.split('\n');
        const headers = lines[0].split(',');
        return JSON.stringify(lines.slice(1).map(line => {
            const data = line.split(',');
            return headers.reduce((obj, nextKey, index) => {
                obj[nextKey.trim()] = data[index];
                return obj;
            }, {

});
        }), null, 2);

});
    createMathTool('bmi-calc', 'BMI Calculator', 'Math', 'Calculate your Body Mass Index (BMI) based on weight and height.',
        [{key:'w', label:'Weight (kg)'}, {key:'h', label:'Height (m)'}],
        (v) => (v.w / (v.h * v.h)).toFixed(2));
    createMathTool('tip-calc', 'Tip Calculator', 'Finance', 'Calculate tip amount.',
        [{key:'bill', label:'Bill Amount'}, {key:'tip', label:'Tip %'}],
        (v) => (v.bill * (v.tip / 100)).toFixed(2));
    createMathTool('discount-calc', 'Discount Calculator', 'Finance', 'Calculate discounted price.',
        [{key:'price', label:'Original Price'}, {key:'disc', label:'Discount %'}],
        (v) => (v.price - (v.price * (v.disc / 100))).toFixed(2));
    createMathTool('sales-tax', 'Sales Tax', 'Finance', 'Calculate final price with tax.',
        [{key:'price', label:'Price'}, {key:'tax', label:'Tax %'}],
        (v) => (v.price * (1 + v.tax / 100)).toFixed(2));
    createMathTool('circle-area', 'Circle Area', 'Math', 'Calculate area of a circle.',
        [{key:'r', label:'Radius'}],
        (v) => (Math.PI * v.r * v.r).toFixed(2));
    createMathTool('rect-area', 'Rectangle Area', 'Math', 'Calculate area of a rectangle.',
        [{key:'w', label:'Width'}, {key:'h', label:'Height'}],
        (v) => (v.w * v.h).toFixed(2));
    createMathTool('triangle-area', 'Triangle Area', 'Math', 'Calculate area of a triangle.',
        [{key:'b', label:'Base'}, {key:'h', label:'Height'}],
        (v) => (0.5 * v.b * v.h).toFixed(2));
    createMathTool('cylinder-vol', 'Cylinder Volume', 'Math', 'Calculate volume of a cylinder.',
        [{key:'r', label:'Radius'}, {key:'h', label:'Height'}],
        (v) => (Math.PI * v.r * v.r * v.h).toFixed(2));
    createMathTool('sphere-vol', 'Sphere Volume', 'Math', 'Calculate volume of a sphere.',
        [{key:'r', label:'Radius'}],
        (v) => ((4/3) * Math.PI * Math.pow(v.r, 3)).toFixed(2));
    createMathTool('simple-interest', 'Simple Interest', 'Finance', 'Calculate simple interest.',
        [{key:'p', label:'Principal'}, {key:'r', label:'Rate %'}, {key:'t', label:'Time (years)'}],
        (v) => (v.p * v.r * v.t / 100).toFixed(2));
    createMathTool('compound-interest', 'Compound Interest', 'Finance', 'Calculate compound interest.',
        [{key:'p', label:'Principal'}, {key:'r', label:'Rate %'}, {key:'t', label:'Time (years)'}, {key:'n', label:'Times/Year'}],
        (v) => (v.p * Math.pow((1 + (v.r/100)/v.n), v.n * v.t)).toFixed(2));
    createMathTool('percentage-of', 'Percentage Of', 'Math', 'What is X% of Y?',
        [{key:'x', label:'Percentage (X)'}, {key:'y', label:'Value (Y)'}],
        (v) => ((v.x / 100) * v.y).toFixed(2));
    createMathTool('percentage-change', 'Percentage Change', 'Math', 'Change from X to Y.',
        [{key:'x', label:'Old Value'}, {key:'y', label:'New Value'}],
        (v) => (((v.y - v.x) / v.x) * 100).toFixed(2) + '%');
    createMathTool('average', 'Average Calculator', 'Math', 'Calculate average of 2 numbers.',
        [{key:'a', label:'Number 1'}, {key:'b', label:'Number 2'}],
        (v) => ((v.a + v.b) / 2).toFixed(2));
    createMathTool('hypotenuse', 'Hypotenuse Calc', 'Math', 'Calculate hypotenuse (Pythagorean).',
        [{key:'a', label:'Side A'}, {key:'b', label:'Side B'}],
        (v) => Math.sqrt(v.a*v.a + v.b*v.b).toFixed(2));
    createMathTool('aspect-ratio', 'Aspect Ratio Height', 'Math', 'Calculate height from width & ratio.',
        [{key:'w', label:'Width'}, {key:'rw', label:'Ratio W'}, {key:'rh', label:'Ratio H'}],
        (v) => (v.w * (v.rh / v.rw)).toFixed(2));
    createMathTool('factorial', 'Factorial', 'Math', 'Calculate N!.',
        [{key:'n', label:'Number (N)'}],
        (v) => {
            let res = 1;
            for(let i=2; i<=v.n; i++) res *= i;
            return res;

});
    createMathTool('power', 'Power Calculator', 'Math', 'Calculate Base^Exponent.',
        [{key:'b', label:'Base'}, {key:'e', label:'Exponent'}],
        (v) => Math.pow(v.b, v.e));
    createMathTool('root', 'Nth Root', 'Math', 'Calculate Nth root of X.',
        [{key:'x', label:'Number (X)'}, {key:'n', label:'Root (N)'}],
        (v) => Math.pow(v.x, 1/v.n).toFixed(4));
    createGeneratorTool('uuid', 'UUID Generator', 'Dev', 'Generate a universally unique identifier (UUID v4).', 'Generate UUID', () =>
        'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        })
    );
    createGeneratorTool('unix-timestamp', 'Unix Timestamp', 'Dev', 'Get current Unix timestamp.', 'Get Timestamp', () => Math.floor(Date.now() / 1000));
    createGeneratorTool('current-time-ms', 'Timestamp (ms)', 'Dev', 'Get current timestamp (ms).', 'Get Milliseconds', () => Date.now());
    createGeneratorTool('random-number', 'Random Number', 'Math', 'Random number 1-100.', 'Roll (1-100)', () => Math.floor(Math.random() * 100) + 1);
    createGeneratorTool('dice-roller', 'Dice Roller', 'Game', 'Roll a 6-sided die.', 'Roll D6', () => Math.floor(Math.random() * 6) + 1);
    createGeneratorTool('coin-flipper', 'Coin Flipper', 'Game', 'Flip a coin.', 'Flip Coin', () => Math.random() < 0.5 ? 'Heads' : 'Tails');
    createGeneratorTool('yes-no', 'Yes/No Decision', 'Game', 'Random Yes or No.', 'Decide', () => Math.random() < 0.5 ? 'Yes' : 'No');

    createGeneratorTool('mac-address', 'MAC Address Gen', 'Dev', 'Random MAC Address.', 'Generate MAC', () => 'XX:XX:XX:XX:XX:XX'.replace(/X/g, () => '0123456789ABCDEF'.charAt(Math.floor(Math.random() * 16))));
    createGeneratorTool('hex-color', 'Random Color', 'Color', 'Generate random Hex color.', 'Generate Color', () => '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0'));
    createGeneratorTool('password-strength', 'Password Strength', 'Security', 'Check password strength.', 'Check', () => {
        // Since input is needed, this simple generator won't work perfectly.
        // Let's just return a placeholder or random advice for the "Generator" pattern.
        // Better: Use SimpleTextTool for this one actually.
        return "Use the 'Password Gen' tool for actual generation.";

});
    createGeneratorTool('lorem-word', 'Random Word', 'Text', 'Generate a random latin word.', 'Generate Word', () => {
        const words = ['lorem', 'ipsum', 'dolor', 'sit', 'amet', 'consectetur', 'adipiscing', 'elit', 'sed', 'do', 'eiusmod', 'tempor', 'incididunt'];
        return words[Math.floor(Math.random() * words.length)];

});
    createSimpleTextTool('hash-simple', 'Simple Hash (djb2)', 'Security', 'Generate simple hash.', (text) => {
        let hash = 5381;
        for (let i = 0; i < text.length; i++) hash = (hash * 33) ^ text.charCodeAt(i);
        return (hash >>> 0).toString(16);

});

    createSimpleTextTool("css-minifier", "CSS Minifier", "Dev", "Minify CSS code.", (text) => text.replace(/\s+/g, " "));
    createSimpleTextTool('js-minifier', 'JS Minifier (Simple)', 'Dev', 'Remove comments and whitespace.', (text) => text.replace(/\/\/.*$/gm, '').replace(/\/\*[\s\S]*?\*\//g, '').replace(/\s+/g, ' '));
    createSimpleTextTool('html-encode', 'HTML Entity Encode', 'Dev', 'Encode HTML special chars.', (text) => text.replace(/[\u00A0-\u9999<>\&]/g, i => '&#'+i.charCodeAt(0)+';'));
    createSimpleTextTool('html-decode', 'HTML Entity Decode', 'Dev', 'Decode HTML entities.', (text) => {
        const doc = new DOMParser().parseFromString(text, "text/html");
        return doc.documentElement.textContent;

});
    createSimpleTextTool('sql-format', 'SQL Formatter', 'Dev', 'Simple SQL Formatting.', (text) => text.replace(/\s+/g, ' ').replace(/ (SELECT|FROM|WHERE|AND|OR|ORDER BY|GROUP BY|LIMIT|INSERT|UPDATE|DELETE) /gi, '\n '));
    createSimpleTextTool('markdown-preview', 'Markdown Preview', 'Text', 'Preview markdown (HTML output).', (text) => {
        // Very simple markdown parser
        return text
            .replace(/^# (.*$)/gim, '<h1></h1>')
            .replace(/^## (.*$)/gim, '<h2></h2>')
            .replace(/^### (.*$)/gim, '<h3></h3>')
            .replace(/\*\*(.*)\*\*/gim, '<b></b>')
            .replace(/\*(.*)\*/gim, '<i></i>')
            .replace(/\n/gim, '<br>');

});
    createMathTool('age-calc', 'Age Calculator', 'Time', 'Calculate age from birth year.',
        [{key:'year', label:'Birth Year'}, {key:'curr', label:'Current Year (optional)', placeholder:'2025'}],
        (v) => (v.curr || new Date().getFullYear()) - v.year);
    createMathTool('date-diff', 'Date Difference (Days)', 'Time', 'Difference between two years.',
        [{key:'y1', label:'Year 1'}, {key:'y2', label:'Year 2'}],
        (v) => Math.abs(v.y1 - v.y2) * 365);
    createMathTool('leap-year', 'Leap Year Checker', 'Time', 'Is year a leap year? (1=Yes, 0=No)',
        [{key:'year', label:'Year'}],
        (v) => ((v.year % 4 == 0 && v.year % 100 != 0) || v.year % 400 == 0) ? "Yes" : "No");
    createMathTool('c-to-f', 'Celsius to Fahrenheit', 'Converter', 'Convert C to F.', [{key:'c', label:'Celsius'}], (v) => (v.c * 9/5 + 32).toFixed(2));
    createMathTool('f-to-c', 'Fahrenheit to Celsius', 'Converter', 'Convert F to C.', [{key:'f', label:'Fahrenheit'}], (v) => ((v.f - 32) * 5/9).toFixed(2));
    createMathTool('km-to-mi', 'KM to Miles', 'Converter', 'Convert km to miles.', [{key:'km', label:'Kilometers'}], (v) => (v.km * 0.621371).toFixed(4));
    createMathTool('mi-to-km', 'Miles to KM', 'Converter', 'Convert miles to km.', [{key:'mi', label:'Miles'}], (v) => (v.mi / 0.621371).toFixed(4));
    createMathTool('kg-to-lb', 'KG to Pounds', 'Converter', 'Convert kg to lbs.', [{key:'kg', label:'Kilograms'}], (v) => (v.kg * 2.20462).toFixed(4));
    createMathTool('lb-to-kg', 'Pounds to KG', 'Converter', 'Convert lbs to kg.', [{key:'lb', label:'Pounds'}], (v) => (v.lb / 2.20462).toFixed(4));
    createMathTool('m-to-ft', 'Meters to Feet', 'Converter', 'Convert meters to feet.', [{key:'m', label:'Meters'}], (v) => (v.m * 3.28084).toFixed(4));
    createMathTool('ft-to-m', 'Feet to Meters', 'Converter', 'Convert feet to meters.', [{key:'ft', label:'Feet'}], (v) => (v.ft / 3.28084).toFixed(4));
    createMathTool('l-to-gal', 'Liters to Gallons', 'Converter', 'Convert liters to US gallons.', [{key:'l', label:'Liters'}], (v) => (v.l * 0.264172).toFixed(4));
    createMathTool('gal-to-l', 'Gallons to Liters', 'Converter', 'Convert US gallons to liters.', [{key:'gal', label:'Gallons'}], (v) => (v.gal / 0.264172).toFixed(4));
    createMathTool('speed-kph-mph', 'KPH to MPH', 'Converter', 'Convert speed.', [{key:'kph', label:'KPH'}], (v) => (v.kph * 0.621371).toFixed(2));
    createMathTool('speed-mph-kph', 'MPH to KPH', 'Converter', 'Convert speed.', [{key:'mph', label:'MPH'}], (v) => (v.mph / 0.621371).toFixed(2));
    createMathTool('data-mb-gb', 'MB to GB', 'Converter', 'Convert Megabytes to Gigabytes.', [{key:'mb', label:'MB'}], (v) => (v.mb / 1024).toFixed(4));
    createMathTool('data-gb-mb', 'GB to MB', 'Converter', 'Convert Gigabytes to Megabytes.', [{key:'gb', label:'GB'}], (v) => (v.gb * 1024).toFixed(2));
    createMathTool('data-byte-kb', 'Bytes to KB', 'Converter', 'Convert Bytes to KB.', [{key:'b', label:'Bytes'}], (v) => (v.b / 1024).toFixed(4));
    createMathTool('time-min-sec', 'Minutes to Seconds', 'Time', 'Convert minutes to seconds.', [{key:'m', label:'Minutes'}], (v) => v.m * 60);
    createMathTool('time-hr-min', 'Hours to Minutes', 'Time', 'Convert hours to minutes.', [{key:'h', label:'Hours'}], (v) => v.h * 60);
    createMathTool('time-day-hr', 'Days to Hours', 'Time', 'Convert days to hours.', [{key:'d', label:'Days'}], (v) => v.d * 24);
    createMathTool('energy-j-cal', 'Joules to Calories', 'Converter', 'Convert energy.', [{key:'j', label:'Joules'}], (v) => (v.j / 4.184).toFixed(4));
    createMathTool('power-hp-kw', 'Horsepower to kW', 'Converter', 'Convert power.', [{key:'hp', label:'Horsepower'}], (v) => (v.hp * 0.7457).toFixed(4));
    createGeneratorTool('random-letter', 'Random Letter', 'Game', 'Random alphabet letter.', 'Pick Letter', () => 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.charAt(Math.floor(Math.random() * 26)));
    createGeneratorTool('random-emoji', 'Random Emoji', 'Game', 'Random emoji.', 'Pick Emoji', () => ['','','','','','','','','','','',''].sort(() => 0.5 - Math.random())[0]);
    createGeneratorTool('lorem-sentence', 'Lorem Sentence', 'Text', 'Random latin sentence.', 'Generate', () => "Lorem ipsum dolor sit amet consectetur adipiscing elit.");
    createSimpleTextTool('space-to-dash', 'Spaces to Dashes', 'Text', 'Replace spaces with dashes.', (text) => text.replace(/ /g, '-'));
    createSimpleTextTool('dash-to-space', 'Dashes to Spaces', 'Text', 'Replace dashes with spaces.', (text) => text.replace(/-/g, ' '));
    createSimpleTextTool('underscore-to-space', 'Underscores to Spaces', 'Text', 'Replace underscores with spaces.', (text) => text.replace(/_/g, ' '));
    createSimpleTextTool('space-to-underscore', 'Spaces to Underscores', 'Text', 'Replace spaces with underscores.', (text) => text.replace(/ /g, '_'));
    createSimpleTextTool('remove-special', 'Remove Special Chars', 'Text', 'Keep only alphanumeric.', (text) => text.replace(/[^a-zA-Z0-9 ]/g, ''));
    createSimpleTextTool('keep-numbers', 'Keep Only Numbers', 'Text', 'Remove non-numeric chars.', (text) => text.replace(/[^0-9]/g, ''));
    createMathTool('bmr-calc', 'BMR Calculator', 'Health', 'Calculate your Basal Metabolic Rate (BMR) calories.',
        [{key:'w', label:'Weight (kg)'}, {key:'h', label:'Height (cm)'}, {key:'a', label:'Age'}],
        (v) => (10 * v.w + 6.25 * v.h - 5 * v.a + 5).toFixed(0) + ' kcal (M) / ' + (10 * v.w + 6.25 * v.h - 5 * v.a - 161).toFixed(0) + ' kcal (F)');
    createMathTool('water-intake', 'Water Intake', 'Health', 'Calculate your recommended daily water intake in liters.',
        [{key:'w', label:'Weight (kg)'}],
        (v) => (v.w * 0.033).toFixed(2) + ' Liters');
    createMathTool('target-heart-rate', 'Target Heart Rate', 'Health', 'Zone 2 (60-70%).',
        [{key:'age', label:'Age'}],
        (v) => {
            const max = 220 - v.age;
            return Math.floor(max * 0.6) + ' - ' + Math.floor(max * 0.7) + ' bpm';

});
    createMathTool('gpa-calc', 'GPA Calculator (4.0)', 'Science', 'Simple Avg GPA.',
        [{key:'g1', label:'Grade 1'}, {key:'g2', label:'Grade 2'}, {key:'g3', label:'Grade 3'}, {key:'g4', label:'Grade 4'}],
        (v) => ((v.g1 + v.g2 + v.g3 + v.g4) / 4).toFixed(2));
    createMathTool('grade-pct', 'Grade Percentage', 'Science', 'Score / Total.',
        [{key:'s', label:'Score'}, {key:'t', label:'Total'}],
        (v) => ((v.s / v.t) * 100).toFixed(2) + '%');
    createSimpleTextTool('html-minifier', 'HTML Minifier', 'Dev', 'Remove whitespace.', (text) => text.replace(/\s+/g, ' ').replace(/> </g, '><'));
    createSimpleTextTool('hashtag-gen', 'Hashtag Generator', 'Social', 'Generate tags from text.', (text) => text.split(' ').map(w => '#' + w).join(' '));
    createSimpleTextTool('tweet-link', 'Tweet Link Gen', 'Social', 'Create intent link.', (text) => 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(text));
    createSimpleTextTool('binary-to-hex', 'Binary to Hex', 'Dev', 'Convert Bin to Hex.', (text) => parseInt(text.replace(/[^01]/g, ''), 2).toString(16).toUpperCase());
    createSimpleTextTool('hex-to-binary', 'Hex to Binary', 'Dev', 'Convert Hex to Bin.', (text) => parseInt(text, 16).toString(2));


    // --- Batch 7: Real Tools ---
    // Mortgage
    createMathTool('mortgage-calc', 'Mortgage Calculator', 'Finance', 'Monthly payment (est).',
        [{key:'p', label:'Loan Amount'}, {key:'r', label:'Annual Rate %'}, {key:'y', label:'Years'}],
        (v) => {
            const r = v.r / 100 / 12;
            const n = v.y * 12;
            return (v.p * r * Math.pow(1 + r, n) / (Math.pow(1 + r, n) - 1)).toFixed(2);

});
    createMathTool('roi-calc', 'ROI Calculator', 'Finance', 'Calculate the percentage return on an investment.', [{key:'inv', label:'Investment'}, {key:'ret', label:'Return Amount'}], (v) => (((v.ret - v.inv) / v.inv) * 100).toFixed(2) + '%');
    createMathTool('salary-calc', 'Salary Converter', 'Finance', 'Annual to Monthly/Hourly.', [{key:'annual', label:'Annual Salary'}], (v) => `Monthly: ${(v.annual/12).toFixed(2)}\nHourly (2080h): ${(v.annual/2080).toFixed(2)}`);
    createSimpleTextTool('xml-format', 'XML Formatter', 'Dev', 'Format and indent your XML code automatically.', (text) => { let formatted = '', indent= ''; text.split(/>\s*</).forEach(node => { if (node.match( /^\/\w/ )) indent = indent.substring(2); formatted += indent + '<' + node + '>\r\n'; if (node.match( /^<?\w[^>]*[^\/]$/ )) indent += '  ';

}); return formatted.substring(1, formatted.length-3);

});
    createSimpleTextTool('sql-minify', 'SQL Minifier', 'Dev', 'Remove whitespace from SQL.', (text) => text.replace(/\s+/g, ' ').trim());

    // Image
    function registerImageTool(id, name, desc, actionName, processFn) {
        registerTool(id, name, 'Image', desc,
            '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>',
            (container) => {
                container.innerHTML = `
                    <div class="glass-panel" style="text-align: center;">
                        <input type="file" id="${id}-file" accept="image/*" style="display: none;">
                        <button id="${id}-upload" class="glass-btn" style="width: 100%; margin-bottom: 10px;">Upload Image</button>
                        <canvas id="${id}-canvas" style="max-width: 100%; max-height: 300px; display: none; border: 1px solid rgba(255,255,255,0.2);"></canvas>
                        <div id="${id}-controls" style="margin-top: 10px; display: none;">
                            <button id="${id}-process" class="glass-btn-primary">${actionName}</button>
                            <a id="${id}-download" class="glass-btn" style="margin-top: 5px; display: inline-flex; justify-content: center; text-decoration: none;">Download</a>
                        </div>
                    </div>
                `;
                const fileInput = document.getElementById(`${id}-file`);
                const uploadBtn = document.getElementById(`${id}-upload`);
                const canvas = document.getElementById(`${id}-canvas`);
                const ctx = canvas.getContext('2d');
                const controls = document.getElementById(`${id}-controls`);
                const processBtn = document.getElementById(`${id}-process`);
                const downloadLink = document.getElementById(`${id}-download`);
                let img = new Image();
                uploadBtn.addEventListener('click', () => fileInput.click());
                fileInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if(file) {
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            img.onload = () => {
                                canvas.width = img.width;
                                canvas.height = img.height;
                                ctx.drawImage(img, 0, 0);
                                canvas.style.display = 'block';
                                controls.style.display = 'block';
                            }
                            img.src = event.target.result;
                        }
                        reader.readAsDataURL(file);
                    }

});
                processBtn.addEventListener('click', () => {
                    processFn(ctx, canvas.width, canvas.height);
                    downloadLink.href = canvas.toDataURL();
                    downloadLink.download = `${id}-result.png`;

});
            }
        );
    }
    registerImageTool('img-grayscale', 'Grayscale Filter', 'Convert to B&W.', 'Apply Grayscale', (ctx, w, h) => { const imgData = ctx.getImageData(0, 0, w, h); const data = imgData.data; for (let i = 0; i < data.length; i += 4) { const avg = (data[i] + data[i + 1] + data[i + 2]) / 3; data[i] = avg; data[i + 1] = avg; data[i + 2] = avg; } ctx.putImageData(imgData, 0, 0);

});
    registerImageTool('img-invert', 'Invert Colors', 'Invert colors.', 'Invert', (ctx, w, h) => { const imgData = ctx.getImageData(0, 0, w, h); const data = imgData.data; for (let i = 0; i < data.length; i += 4) { data[i] = 255 - data[i]; data[i + 1] = 255 - data[i + 1]; data[i + 2] = 255 - data[i + 2]; } ctx.putImageData(imgData, 0, 0);

});

    // QR & IP & SHA were added in reconstruct_full.py already or need to be here?
    // They are in reconstruct_full.py hardcoded.

    // --- Batch 8 ---
    registerTool('regex-real', 'Regex Tester', 'Dev', 'Test and debug your JavaScript regular expressions.',
        '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"/><polyline points="14 2 14 8 20 8"/><path d="M2 15h10"/><path d="M9 18l3-3-3-3"/></svg>',
        (container) => {
            container.innerHTML = `
                <div class="glass-panel" style="max-width: 800px;">
                    <div class="input-group">
                        <label>Pattern (e.g. \\d+)</label>
                        <input type="text" id="rx-pattern" class="glass-input" placeholder="\\w+">
                    </div>
                    <div class="input-group">
                        <label>Flags (e.g. gi)</label>
                        <input type="text" id="rx-flags" class="glass-input" placeholder="g">
                    </div>
                    <label>Test String</label>
                    <textarea id="rx-text" class="glass-textarea" placeholder="Text to match..."></textarea>
                    <button id="rx-btn" class="glass-btn-primary" style="margin-bottom: 10px;">Test Regex</button>
                    <label>Matches</label>
                    <div id="rx-result" class="glass-textarea" style="white-space: pre-wrap;"></div>
                </div>
            `;
            document.getElementById('rx-btn').addEventListener('click', () => {
                const pat = document.getElementById('rx-pattern').value;
                const flags = document.getElementById('rx-flags').value;
                const text = document.getElementById('rx-text').value;
                const resDiv = document.getElementById('rx-result');
                try {
                    const regex = new RegExp(pat, flags);
                    const matches = text.match(regex);
                    if(matches) { resDiv.textContent = JSON.stringify(matches, null, 2); resDiv.style.color = 'white'; }
                    else { resDiv.textContent = 'No matches found.'; resDiv.style.color = '#ffaaaa'; }
                } catch(e) { resDiv.textContent = 'Error: ' + e.message; resDiv.style.color = '#ff6b6b'; }

});
        }
    );
    createMathTool('prime-factor', 'Prime Factorization', 'Math', 'Find prime factors.', [{key:'n', label:'Number'}], (v) => { let n = parseInt(v.n); const f = []; let d = 2; while (d * d <= n) { while (n % d === 0) { f.push(d); n = Math.floor(n / d); } d++; } if (n > 1) f.push(n); return f.join('  ');

});
    createSimpleTextTool('list-random', 'Randomize List', 'Text', 'Shuffle list items.', (text) => text.split('\n').sort(() => 0.5 - Math.random()).join('\n'));
    createSimpleTextTool('list-sort', 'Sort List (Numeric)', 'Text', 'Sort numbers.', (text) => text.split('\n').sort((a,b) => parseFloat(a)-parseFloat(b)).join('\n'));
    createSimpleTextTool('json-minify', 'JSON Minifier', 'Dev', 'Remove whitespace from JSON.', (text) => JSON.stringify(JSON.parse(text)));

    // --- Batch 9 ---
    createMathTool('gcd-lcm', 'GCD & LCM', 'Math', 'Greatest Common Divisor.', [{key:'a', label:'Number A'}, {key:'b', label:'Number B'}], (v) => {
        const gcd = (a, b) => !b ? a : gcd(b, a % b);
        const lcm = (a, b) => (a * b) / gcd(a, b);
        const g = gcd(v.a, v.b);
        const l = lcm(v.a, v.b);
        return 'GCD: ' + g + ' | LCM: ' + l;

});
    createMathTool('pct-diff', 'Percentage Difference', 'Math', 'Diff between two values.', [{key:'v1', label:'Value 1'}, {key:'v2', label:'Value 2'}], (v) => {
        const avg = (v.v1 + v.v2) / 2;
        return (Math.abs(v.v1 - v.v2) / avg * 100).toFixed(2) + '%';

});
    createSimpleTextTool('text-diff', 'Text Diff (Lines)', 'Text', 'Show added/removed lines.', (text) => {
        const parts = text.split('\n---\n');
        if(parts.length < 2) return "Enter two text blocks separated by a line containing only '---'";
        const lines1 = parts[0].split('\n');
        const lines2 = parts[1].split('\n');
        const added = lines2.filter(x => !lines1.includes(x));
        const removed = lines1.filter(x => !lines2.includes(x));
        return 'Added:\n' + added.join('\n') + '\n\nRemoved:\n' + removed.join('\n');

});
    createSimpleTextTool('remove-dup-lines', 'Remove Duplicates', 'Text', 'Unique lines only.', (text) => [...new Set(text.split('\n'))].join('\n'));
    createSimpleTextTool('url-parser', 'URL Parser', 'Dev', 'Parse URL parts.', (text) => { try { const u = new URL(text); return JSON.stringify({ protocol: u.protocol, host: u.host, pathname: u.pathname, search: u.search, hash: u.hash }, null, 2); } catch(e) { return "Invalid URL"; }

});
    createSimpleTextTool('curl-gen', 'Curl Generator', 'Dev', 'GET request curl.', (text) => 'curl -X GET "' + text + '"');

    registerTool('contrast-check', 'Contrast Checker', 'Color', 'Check text contrast.',
        '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>',
        (container) => {
            container.innerHTML = `
                <div class="glass-panel" style="max-width: 500px;">
                    <div class="input-group">
                        <label>Foreground (Hex)</label>
                        <input type="color" id="cc-fg" class="glass-input" value="#ffffff" style="height:50px;">
                    </div>
                    <div class="input-group">
                        <label>Background (Hex)</label>
                        <input type="color" id="cc-bg" class="glass-input" value="#000000" style="height:50px;">
                    </div>
                    <div id="cc-preview" style="padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; border: 1px solid rgba(255,255,255,0.2);">Preview Text</div>
                    <div id="cc-result" style="text-align: center; font-weight: bold; font-size: 1.2rem;">Ratio: 21.00 (AAA)</div>
                </div>`;
            function getLum(hex) {
                const r = parseInt(hex.substr(1,2),16)/255;
                const g = parseInt(hex.substr(3,2),16)/255;
                const b = parseInt(hex.substr(5,2),16)/255;
                const a = [r,g,b].map(v => v <= 0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4));
                return a[0]*0.2126 + a[1]*0.7152 + a[2]*0.0722;
            }
            function check() {
                const fg = document.getElementById('cc-fg').value;
                const bg = document.getElementById('cc-bg').value;
                document.getElementById('cc-preview').style.color = fg;
                document.getElementById('cc-preview').style.backgroundColor = bg;
                const l1 = getLum(fg);
                const l2 = getLum(bg);
                const ratio = (Math.max(l1,l2)+0.05)/(Math.min(l1,l2)+0.05);
                let rating = '';
                if(ratio >= 7) rating = '(AAA)';
                else if(ratio >= 4.5) rating = '(AA)';
                else rating = '(Fail)';
                document.getElementById('cc-result').textContent = 'Ratio: ' + ratio.toFixed(2) + ' ' + rating;
            }
            document.getElementById('cc-fg').addEventListener('input', check);
            document.getElementById('cc-bg').addEventListener('input', check);
            check();
        }
    );

    // --- Batch 10: The Road to 200 ---
    // Math
    createMathTool('factorial', 'Factorial', 'Math', 'N!', [{key:'n', label:'N'}], (v) => { let r=1; for(let i=2; i<=v.n; i++) r*=i; return r;

});
    createMathTool('fibonacci', 'Fibonacci', 'Math', 'Calculate the Nth number in the Fibonacci sequence.', [{key:'n', label:'N'}], (v) => { let a=0, b=1, t; for(let i=2; i<=v.n; i++){t=a+b; a=b; b=t;} return v.n<1?0:b;

});
    createMathTool('sqrt', 'Square Root', 'Math', 'Calculate the square root of a number.', [{key:'x', label:'X'}], (v) => Math.sqrt(v.x).toFixed(4));
    createMathTool('cbrt', 'Cube Root', 'Math', 'Calculate the cube root of a number.', [{key:'x', label:'X'}], (v) => Math.cbrt(v.x).toFixed(4));
    createMathTool('log10', 'Log Base 10', 'Math', 'Calculate the base-10 logarithm of a number.', [{key:'x', label:'X'}], (v) => Math.log10(v.x).toFixed(4));
    createMathTool('ln', 'Natural Log', 'Math', 'Calculate the natural logarithm of a number.', [{key:'x', label:'X'}], (v) => Math.log(v.x).toFixed(4));
    createMathTool('sin', 'Sine', 'Math', 'Calculate the sine of an angle in degrees.', [{key:'x', label:'Degrees'}], (v) => Math.sin(v.x * Math.PI / 180).toFixed(4));
    createMathTool('cos', 'Cosine', 'Math', 'Calculate the cosine of an angle in degrees.', [{key:'x', label:'Degrees'}], (v) => Math.cos(v.x * Math.PI / 180).toFixed(4));
    createMathTool('tan', 'Tangent', 'Math', 'Calculate the tangent of an angle in degrees.', [{key:'x', label:'Degrees'}], (v) => Math.tan(v.x * Math.PI / 180).toFixed(4));
    createMathTool('deg-rad', 'Deg to Rad', 'Math', 'Degrees to Radians.', [{key:'d', label:'Degrees'}], (v) => (v.d * Math.PI / 180).toFixed(4));
    createMathTool('rad-deg', 'Rad to Deg', 'Math', 'Radians to Degrees.', [{key:'r', label:'Radians'}], (v) => (v.r * 180 / Math.PI).toFixed(4));

    // Statistics
    createSimpleTextTool('stats-mean', 'Mean Calculator', 'Math', 'Calculate the mean (average) of a list of numbers.', (text) => { const n = text.match(/-?[\d\.]+/g).map(Number); return (n.reduce((a,b)=>a+b,0)/n.length).toFixed(4);

});
    createSimpleTextTool('stats-median', 'Median Calculator', 'Math', 'Calculate the median value of a list of numbers.', (text) => { const n = text.match(/-?[\d\.]+/g).map(Number).sort((a,b)=>a-b); const m = Math.floor(n.length/2); return (n.length%2!==0 ? n[m] : (n[m-1]+n[m])/2).toFixed(4);

});
    createSimpleTextTool('stats-range', 'Range Calculator', 'Math', 'Range (Max-Min).', (text) => { const n = text.match(/-?[\d\.]+/g).map(Number); return (Math.max(...n) - Math.min(...n)).toFixed(4);

});

    // Text
    createSimpleTextTool('repeat-string', 'Repeat String', 'Text', 'Repeat a string N times (specify N on the first line).', (text) => { const lines = text.split('\n'); const n = parseInt(lines[0]) || 1; return lines.slice(1).join('\n').repeat(n);

});
    createSimpleTextTool('pad-start', 'Pad Start', 'Text', 'Pad the start of each line with spaces.', (text) => text.split('\n').map(l => l.padStart(20, ' ')).join('\n'));
    createSimpleTextTool('pad-end', 'Pad End', 'Text', 'Pad text end.', (text) => text.split('\n').map(l => l.padEnd(20, ' ')).join('\n'));
    createSimpleTextTool('center-text', 'Center Text', 'Text', 'Center align text (mock).', (text) => text.split('\n').map(l => l.padStart((40 + l.length)/2).padEnd(40)).join('\n'));
    createSimpleTextTool('leet-speak', 'Leet Speak', 'Text', '1337 5p34k.', (text) => text.replace(/[aA]/g,'4').replace(/[eE]/g,'3').replace(/[iI]/g,'1').replace(/[oO]/g,'0').replace(/[sS]/g,'5').replace(/[tT]/g,'7'));
    createSimpleTextTool('obfuscate', 'Obfuscate Text', 'Text', 'Base64 + Reverse.', (text) => btoa(text).split('').reverse().join(''));

    // Dev
    createSimpleTextTool('chmod-calc', 'Chmod Calculator', 'Dev', 'Convert chmod octal permissions to symbolic notation.', (text) => {
        const p = ['---','--x','-w-','-wx','r--','r-x','rw-','rwx'];
        return text.split('').map(c => p[parseInt(c)] || '').join('');

});
    createSimpleTextTool('http-status', 'HTTP Status', 'Dev', 'Lookup the meaning of HTTP status codes.', (text) => {
        const codes = {200:'OK', 201:'Created', 400:'Bad Request', 401:'Unauthorized', 403:'Forbidden', 404:'Not Found', 500:'Server Error', 502:'Bad Gateway'};
        return codes[text] || 'Unknown';

});

    // Health
    createMathTool('body-fat', 'Body Fat (Navy)', 'Health', 'Estimate your body fat percentage using the US Navy method.', [{key:'w', label:'Waist (cm)'}, {key:'n', label:'Neck (cm)'}, {key:'h', label:'Height (cm)'}], (v) => (495 / (1.0324 - 0.19077 * Math.log10(v.w - v.n) + 0.15456 * Math.log10(v.h)) - 450).toFixed(2) + '%');
    createMathTool('ideal-weight', 'Ideal Weight (Devine)', 'Health', 'Calculate your ideal body weight using the Devine formula.', [{key:'h', label:'Height (in)'}], (v) => (50 + 2.3 * (v.h - 60)).toFixed(2) + ' kg');

    // Finance
    createMathTool('rule-72', 'Rule of 72', 'Finance', 'Estimate years to double your investment using Rule of 72.', [{key:'r', label:'Rate %'}], (v) => (72 / v.r).toFixed(2) + ' Years');
    createMathTool('vat-calc', 'VAT Calculator', 'Finance', 'Add VAT.', [{key:'p', label:'Price'}, {key:'v', label:'VAT %'}], (v) => (v.p * (1 + v.v/100)).toFixed(2));
    createMathTool('markup-calc', 'Markup Calculator', 'Finance', 'Price + Markup.', [{key:'c', label:'Cost'}, {key:'m', label:'Markup %'}], (v) => (v.c * (1 + v.m/100)).toFixed(2));
    createMathTool('margin-calc', 'Margin Calculator', 'Finance', 'Find Margin.', [{key:'c', label:'Cost'}, {key:'p', label:'Price'}], (v) => ((v.p - v.c) / v.p * 100).toFixed(2) + '%');

    // Science / Units
    function createConverter(id, name, cat, desc, unit1, unit2, factor) {
        createMathTool(id, name, cat, desc, [{key:'v', label:unit1}], (v) => (v.v * factor).toFixed(4) + ' ' + unit2);
        createMathTool(id + '-rev', name + ' (Rev)', cat, desc, [{key:'v', label:unit2}], (v) => (v.v / factor).toFixed(4) + ' ' + unit1);
    }

    createConverter('pres-bar-psi', 'Bar to PSI', 'Science', 'Convert pressure units (Bar, PSI, etc.).', 'Bar', 'PSI', 14.5038);
    createConverter('ener-j-wh', 'Joules to Wh', 'Science', 'Energy.', 'Joules', 'Wh', 0.000277778);
    createConverter('force-n-lbf', 'Newton to lbf', 'Science', 'Convert force units (Newtons, Pounds-force, etc.).', 'Newton', 'lbf', 0.224809);
    createConverter('angle-deg-grad', 'Deg to Grad', 'Science', 'Angle.', 'Deg', 'Grad', 1.11111);
    createConverter('data-tb-gb', 'TB to GB', 'Science', 'Convert digital data storage units.', 'TB', 'GB', 1024);

    // Random
    createGeneratorTool('random-bool', 'True/False', 'Random', 'Generate a random True or False value.', 'Flip', () => Math.random() < 0.5 ? 'True' : 'False');
    createGeneratorTool('random-date', 'Random Date', 'Random', 'Generate a random date within the past 50 years.', 'Generate', () => new Date(Date.now() - Math.random() * 1000000000000).toLocaleDateString());
    createGeneratorTool('random-time', 'Random Time', 'Random', '24h format.', 'Generate', () => Math.floor(Math.random()*24).toString().padStart(2,'0') + ':' + Math.floor(Math.random()*60).toString().padStart(2,'0'));

    // --- Render & Navigation ---
    function renderDashboard() {
        dashboard.innerHTML = '';
        const sortedTools = Object.keys(toolRegistry).sort();
        sortedTools.forEach(key => {
            const tool = toolRegistry[key];
            const card = document.createElement('div');
            card.className = 'tool-card';
            card.setAttribute('data-tool', key);
            card.setAttribute('data-category', tool.category);
            card.innerHTML = `
                <div class="icon">${tool.icon}</div>
                <h3>${tool.name}</h3>
                <p>${tool.description}</p>
            `;
            dashboard.appendChild(card);

});

        const countBadge = document.getElementById('tool-count-badge');
        if (countBadge) {
            const count = sortedTools.length;
            countBadge.textContent = `${count} Tools`;
            countBadge.style.display = 'inline-block';
            document.getElementById('search-input').placeholder = `Search ${count} tools...`;
        }
    }

    function showDashboard() {
        toolView.style.display = 'none';
        dashboard.style.display = 'grid';
        if(categoryTabs) categoryTabs.style.display = 'flex';
        const toolNav = document.getElementById('tool-nav');
        if(toolNav) toolNav.style.display = 'none';
        document.getElementById('content-area').classList.add('masked-scroll');
        toolContent.innerHTML = '';
        searchInput.value = '';
        setRandomTheme();
        document.title = 'Tooltimate - The Glassomorphic Web Utility Hub';
        history.pushState(null, null, ' ');
    }

    function showTool(toolId) {
        const tool = toolRegistry[toolId];
        if (tool) {
            dashboard.style.display = 'none';
            toolView.style.display = 'flex';
            if(categoryTabs) categoryTabs.style.display = 'none';
            const toolNav = document.getElementById('tool-nav');
            if(toolNav) toolNav.style.display = 'flex';
            document.getElementById('content-area').classList.remove('masked-scroll');
            toolTitle.textContent = tool.name;
            const catBadge = document.getElementById('tool-category-badge');

            if(catBadge) {
                catBadge.textContent = tool.category || 'Tool';
                catBadge.style.cursor = 'pointer';
                catBadge.onclick = (e) => {
                    e.stopPropagation();
                    window.location.hash = '';
                    setTimeout(() => filterByCategory(tool.category), 50);
                };
            }

            toolContent.innerHTML = '';
            tool.render(toolContent);
            document.title = tool.name + ' - Tooltimate';
            if (window.location.hash !== '#' + toolId) {
                history.pushState(null, null, '#' + toolId);
            }
        }
    }

    function handleRouting() {
        const hash = window.location.hash.substring(1);
        if (hash && toolRegistry[hash]) {
            showTool(hash);
        } else {
            showDashboard();
        }
    }

    setRandomTheme();

    // --- Batch 11: Final Push to 200 ---

    registerTool('currency-conv', 'Currency Converter', 'Finance', 'Real-time rates.',
        '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/><path d="M12 18V6"/></svg>',
        (container) => {
            container.innerHTML = `
                <div class="glass-panel" style="max-width: 500px;">
                    <div class="input-group">
                        <label>Amount</label>
                        <input type="number" id="curr-amount" class="glass-input" value="1">
                    </div>
                    <div class="converter-grid">
                        <select id="curr-from" class="glass-select"></select>
                        <div class="converter-arrow"></div>
                        <select id="curr-to" class="glass-select"></select>
                    </div>
                    <div id="curr-result" style="text-align: center; font-size: 2rem; font-weight: bold; margin-top: 20px;">-</div>
                    <div id="curr-rate" style="text-align: center; font-size: 0.8rem; opacity: 0.7;">Fetching rates...</div>
                </div>
            `;

            const amount = document.getElementById('curr-amount');
            const from = document.getElementById('curr-from');
            const to = document.getElementById('curr-to');
            const result = document.getElementById('curr-result');
            const rateMsg = document.getElementById('curr-rate');

            let rates = {};

            fetch('https://open.er-api.com/v6/latest/USD')
                .then(r => r.json())
                .then(data => {
                    rates = data.rates;
                    rateMsg.textContent = `Rates updated: ${data.time_last_update_utc}`;
                    const currencies = Object.keys(rates).sort();
                    const opts = currencies.map(c => `<option value="${c}">${c}</option>`).join('');
                    from.innerHTML = opts;
                    to.innerHTML = opts;
                    from.value = 'USD';
                    to.value = 'EUR';
                    convert();
                })
                .catch(e => rateMsg.textContent = 'Error fetching rates (Using offline backup)');

            function convert() {
                if(!rates['USD']) return;
                const amt = parseFloat(amount.value) || 0;
                const base = amt / rates[from.value];
                const final = base * rates[to.value];
                result.textContent = final.toFixed(2) + ' ' + to.value;
            }

            amount.addEventListener('input', convert);
            from.addEventListener('change', convert);
            to.addEventListener('change', convert);
        }
    );

    // More Converters
    createConverter('area-sqm-sqft', 'Sq Meters to Sq Feet', 'Science', 'Convert area units.', 'm', 'ft', 10.7639);
    createConverter('area-sqkm-sqmi', 'Sq KM to Sq Miles', 'Science', 'Convert area units.', 'km', 'mi', 0.386102);
    createConverter('vol-l-ml', 'Liters to ML', 'Science', 'Convert volume units.', 'L', 'mL', 1000);
    createConverter('vol-gal-qt', 'Gallons to Quarts', 'Science', 'Convert volume units.', 'Gal', 'Qt', 4);
    createConverter('vol-qt-pt', 'Quarts to Pints', 'Science', 'Convert volume units.', 'Qt', 'Pt', 2);
    createConverter('vol-pt-cup', 'Pints to Cups', 'Science', 'Convert volume units.', 'Pt', 'Cup', 2);
    createConverter('len-cm-in', 'CM to Inches', 'Science', 'Convert length and distance units.', 'cm', 'in', 0.393701);
    createConverter('len-mm-in', 'MM to Inches', 'Science', 'Convert length and distance units.', 'mm', 'in', 0.0393701);
    createConverter('len-yd-m', 'Yards to Meters', 'Science', 'Convert length and distance units.', 'yd', 'm', 0.9144);
    createConverter('mass-oz-g', 'Ounces to Grams', 'Science', 'Convert mass and weight units.', 'oz', 'g', 28.3495);
    createConverter('mass-t-kg', 'Tons to KG', 'Science', 'Convert mass and weight units.', 't', 'kg', 1000);
    createConverter('time-wk-d', 'Weeks to Days', 'Time', 'Convert various time units.', 'Wk', 'Day', 7);
    createConverter('time-yr-d', 'Years to Days', 'Time', 'Convert various time units.', 'Yr', 'Day', 365.25);
    createConverter('time-dec-yr', 'Decades to Years', 'Time', 'Convert various time units.', 'Dec', 'Yr', 10);
    createConverter('data-kb-b', 'KB to Bytes', 'Dev', 'Convert digital data storage units.', 'KB', 'B', 1024);
    createConverter('data-pb-tb', 'PB to TB', 'Dev', 'Convert digital data storage units.', 'PB', 'TB', 1024);

    // Simple Math
    createMathTool('circle-circum', 'Circle Circumference', 'Math', '2*pi*r', [{key:'r', label:'Radius'}], (v) => (2 * Math.PI * v.r).toFixed(2));
    createMathTool('sphere-area', 'Sphere Area', 'Math', '4*pi*r^2', [{key:'r', label:'Radius'}], (v) => (4 * Math.PI * v.r * v.r).toFixed(2));
    createMathTool('cone-vol', 'Cone Volume', 'Math', 'Convert volume units.', [{key:'r', label:'Radius'}, {key:'h', label:'Height'}], (v) => (Math.PI * v.r * v.r * v.h / 3).toFixed(2));
    createMathTool('box-vol', 'Box Volume', 'Math', 'L*W*H', [{key:'l', label:'L'}, {key:'w', label:'W'}, {key:'h', label:'H'}], (v) => (v.l*v.w*v.h).toFixed(2));
    createMathTool('mod', 'Modulo Calculator', 'Math', 'A % B', [{key:'a', label:'A'}, {key:'b', label:'B'}], (v) => v.a % v.b);

    // Misc
    createSimpleTextTool('reverse-lines', 'Reverse Lines', 'Text', 'Flip line order.', (text) => text.split('\n').reverse().join('\n'));
    createSimpleTextTool('sort-length', 'Sort by Length', 'Text', 'Sort lines by length.', (text) => text.split('\n').sort((a,b) => a.length - b.length).join('\n'));
    createGeneratorTool('random-digit', 'Random Digit', 'Random', '0-9', 'Pick', () => Math.floor(Math.random()*10));
    createGeneratorTool('random-char', 'Random Char', 'Random', 'A-Z, 0-9', 'Pick', () => 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'.charAt(Math.floor(Math.random()*36)));

    document.getElementById('content-area').classList.add('masked-scroll');

    // --- Navigation Logic ---
    function filterByCategory(category) {
        const cards = document.querySelectorAll('.tool-card');
        cards.forEach(card => {
            const cardCat = card.getAttribute('data-category');
            if (category === 'All' || cardCat === category || (!cardCat && category === 'All')) {
                card.style.display = 'flex';
            } else {
                card.style.display = 'none';
            }

});

        // Update Active Tab
        const tabs = document.querySelectorAll('.category-tab');
        tabs.forEach(t => {
            if(t.getAttribute('data-cat') === category) t.classList.add('active');
            else t.classList.remove('active');

});
    }

    const tabs = document.querySelectorAll('.category-tab');
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            filterByCategory(tab.getAttribute('data-cat'));

});

});


    // --- Batch 12: Goal 250 (Health, Science, Finance, Color) ---

    // Health (Anemic)
    createMathTool('preg-due', 'Pregnancy Due Date', 'Health', 'Based on LMP.', [{key:'d', label:'Day'}, {key:'m', label:'Month'}, {key:'y', label:'Year'}], (v) => { const d = new Date(v.y, v.m-1, v.d); d.setDate(d.getDate() + 280); return d.toLocaleDateString(); });
    createMathTool('ovul-calc', 'Ovulation Calculator', 'Health', 'Next fertile window.', [{key:'d', label:'LMP Day'}, {key:'m', label:'LMP Month'}, {key:'y', label:'LMP Year'}, {key:'c', label:'Cycle Days'}], (v) => { const d = new Date(v.y, v.m-1, v.d); d.setDate(d.getDate() + (v.c || 28) - 14); return d.toLocaleDateString(); });
    createMathTool('cal-burned', 'Calories Burned', 'Health', 'Estimate by MET.', [{key:'w', label:'Weight (kg)'}, {key:'t', label:'Time (min)'}, {key:'met', label:'MET Value'}], (v) => (v.met * 3.5 * v.w / 200 * v.t).toFixed(0) + ' kcal');
    createMathTool('one-rep-max', 'One Rep Max', 'Health', 'Epley Formula.', [{key:'w', label:'Weight'}, {key:'r', label:'Reps'}], (v) => (v.w * (1 + v.r/30)).toFixed(1));
    createMathTool('protein-intake', 'Protein Intake', 'Health', 'Daily need (1.6g/kg).', [{key:'w', label:'Weight (kg)'}], (v) => (v.w * 1.6).toFixed(1) + ' g');
    createMathTool('tdee-calc', 'TDEE Calculator', 'Health', 'Daily Energy Expenditure.', [{key:'bmr', label:'BMR'}, {key:'act', label:'Activity Level (1.2-1.9)'}], (v) => (v.bmr * v.act).toFixed(0) + ' kcal');
    createMathTool('bac-est', 'BAC Estimate', 'Health', 'Widmark Formula.', [{key:'alc', label:'Alcohol (g)'}, {key:'w', label:'Weight (kg)'}, {key:'r', label:'r (0.7 M, 0.6 F)'}, {key:'t', label:'Hours'}], (v) => ((v.alc / (v.w * v.r)) * 100 - (0.015 * v.t)).toFixed(3) + '%');

    // Science (Anemic)
    createMathTool('molar-mass', 'Molar Mass (Approx)', 'Science', 'Sum of parts.', [{key:'n', label:'Num Atoms'}, {key:'w', label:'Atomic Weight'}], (v) => (v.n * v.w).toFixed(4) + ' g/mol');
    createMathTool('density-calc', 'Density Calculator', 'Science', 'Mass/Volume.', [{key:'m', label:'Mass'}, {key:'v', label:'Volume'}], (v) => (v.m / v.v).toFixed(4));
    createMathTool('velocity-calc', 'Velocity Calculator', 'Science', 'Dist/Time.', [{key:'d', label:'Distance'}, {key:'t', label:'Time'}], (v) => (v.d / v.t).toFixed(4));
    createMathTool('accel-calc', 'Acceleration Calc', 'Science', 'Delta V / Time.', [{key:'v', label:'Change in Vel'}, {key:'t', label:'Time'}], (v) => (v.v / v.t).toFixed(4));
    createMathTool('momentum-calc', 'Momentum Calculator', 'Science', 'Mass * Vel.', [{key:'m', label:'Mass'}, {key:'v', label:'Velocity'}], (v) => (v.m * v.v).toFixed(4));
    createMathTool('kin-energy', 'Kinetic Energy', 'Science', '0.5 * m * v^2', [{key:'m', label:'Mass'}, {key:'v', label:'Velocity'}], (v) => (0.5 * v.m * v.v * v.v).toFixed(4) + ' J');
    createMathTool('pot-energy', 'Potential Energy', 'Science', 'm * g * h', [{key:'m', label:'Mass'}, {key:'h', label:'Height'}], (v) => (v.m * 9.8 * v.h).toFixed(4) + ' J');
    createMathTool('torque-calc', 'Torque Calculator', 'Science', 'Force * Radius.', [{key:'f', label:'Force'}, {key:'r', label:'Radius'}], (v) => (v.f * v.r).toFixed(4) + ' Nm');
    createMathTool('power-phys', 'Power (Physics)', 'Science', 'Work / Time.', [{key:'w', label:'Work'}, {key:'t', label:'Time'}], (v) => (v.w / v.t).toFixed(4) + ' W');
    createSimpleTextTool('element-lookup', 'Element Lookup', 'Science', 'Get symbol.', (text) => { const e = {Hydrogen:'H',Helium:'He',Lithium:'Li',Carbon:'C',Nitrogen:'N',Oxygen:'O',Sodium:'Na',Magnesium:'Mg'}; return e[text] || 'Element not found'; });

    // Finance (Anemic)
    createMathTool('inflation-calc', 'Inflation (Est)', 'Finance', 'Future Value.', [{key:'p', label:'Amount'}, {key:'r', label:'Rate %'}, {key:'y', label:'Years'}], (v) => (v.p * Math.pow(1+v.r/100, v.y)).toFixed(2));
    createMathTool('savings-goal', 'Savings Goal', 'Finance', 'Monthly needed.', [{key:'g', label:'Goal'}, {key:'c', label:'Current'}, {key:'m', label:'Months'}], (v) => ((v.g - v.c) / v.m).toFixed(2));
    createMathTool('rule-50-30-20', '50/30/20 Rule', 'Finance', 'Budget Split.', [{key:'inc', label:'Income'}], (v) => `Needs: ${(v.inc*0.5).toFixed(2)}\nWants: ${(v.inc*0.3).toFixed(2)}\nSave: ${(v.inc*0.2).toFixed(2)}`);
    createMathTool('cagr-calc', 'CAGR Calculator', 'Finance', 'Growth Rate.', [{key:'ev', label:'End Val'}, {key:'bv', label:'Begin Val'}, {key:'n', label:'Years'}], (v) => ((Math.pow(v.ev/v.bv, 1/v.n) - 1) * 100).toFixed(2) + '%');
    createMathTool('breakeven', 'Break Even Point', 'Finance', 'Units to sell.', [{key:'fc', label:'Fixed Cost'}, {key:'p', label:'Price'}, {key:'vc', label:'Var Cost'}], (v) => (v.fc / (v.p - v.vc)).toFixed(0));

    // Color
    createSimpleTextTool('rgb-cmyk', 'RGB to CMYK', 'Color', 'Convert RGB.', (text) => { const [r,g,b] = text.split(',').map(Number); const k = 1-Math.max(r/255,g/255,b/255); return `C:${((1-r/255-k)/(1-k)).toFixed(2)} M:${((1-g/255-k)/(1-k)).toFixed(2)} Y:${((1-b/255-k)/(1-k)).toFixed(2)} K:${k.toFixed(2)}`; });
    createSimpleTextTool('hex-rgb', 'Hex to RGB', 'Color', 'Convert Hex.', (text) => { const r=parseInt(text.substr(1,2),16), g=parseInt(text.substr(3,2),16), b=parseInt(text.substr(5,2),16); return `${r},${g},${b}`; });

    // Dev
    createSimpleTextTool('unix-date', 'Unix to Date', 'Dev', 'Timestamp to ISO.', (text) => new Date(text*1000).toISOString());
    createSimpleTextTool('date-unix', 'Date to Unix', 'Dev', 'ISO to Timestamp.', (text) => Math.floor(new Date(text).getTime()/1000));
    createSimpleTextTool('url-encode-batch', 'Batch URL Encode', 'Dev', 'Line by line.', (text) => text.split('\n').map(encodeURIComponent).join('\n'));
    createSimpleTextTool('jwt-decode', 'JWT Decode', 'Dev', 'Decode payload.', (text) => { try { return atob(text.split('.')[1]); } catch(e) { return "Invalid JWT"; } });
    createSimpleTextTool('json-xml', 'JSON to XML', 'Dev', 'Simple converter.', (text) => { const o = JSON.parse(text); return Object.keys(o).map(k => `<${k}>${o[k]}</${k}>`).join('\n'); });



    // --- Batch 13: Goal 250+ (Finance, Health, Science, Dev) ---
    // Finance
    createMathTool('loan-afford', 'Loan Affordability', 'Finance', 'How much can I borrow?', [{key:'inc', label:'Monthly Income'}, {key:'exp', label:'Monthly Debt'}, {key:'r', label:'Rate %'}, {key:'y', label:'Years'}], (v) => {
        const r = v.r/1200; const n = v.y*12; const maxPay = (v.inc - v.exp) * 0.36; // 36% rule
        return (maxPay * (Math.pow(1+r,n)-1) / (r * Math.pow(1+r,n))).toFixed(2);
    });
    createMathTool('cd-calc', 'CD Calculator', 'Finance', 'Certificate of Deposit.', [{key:'p', label:'Deposit'}, {key:'r', label:'Rate %'}, {key:'y', label:'Years'}], (v) => (v.p * Math.pow(1+v.r/100, v.y)).toFixed(2));
    createMathTool('net-worth', 'Net Worth', 'Finance', 'Assets - Liabilities.', [{key:'a', label:'Assets'}, {key:'l', label:'Liabilities'}], (v) => (v.a - v.l).toFixed(2));
    createMathTool('debt-ratio', 'Debt-to-Income', 'Finance', 'Debt / Income.', [{key:'d', label:'Monthly Debt'}, {key:'i', label:'Monthly Income'}], (v) => ((v.d/v.i)*100).toFixed(2) + '%');
    createMathTool('expense-ratio', 'Expense Ratio', 'Finance', 'Cost of fund.', [{key:'c', label:'Cost'}, {key:'inv', label:'Investment'}], (v) => ((v.c/v.inv)*100).toFixed(2) + '%');

    // Health
    createMathTool('bmi-prime', 'BMI Prime', 'Health', 'Ratio to upper limit (25).', [{key:'bmi', label:'BMI'}], (v) => (v.bmi / 25).toFixed(2));
    createMathTool('lean-body-mass', 'Lean Body Mass (Boer)', 'Health', 'LBM Estimate.', [{key:'w', label:'Weight (kg)'}, {key:'h', label:'Height (cm)'}, {key:'g', label:'Gender (1=M, 0=F)'}], (v) => v.g==1 ? (0.407*v.w + 0.267*v.h - 19.2).toFixed(1) : (0.252*v.w + 0.473*v.h - 48.3).toFixed(1));
    createMathTool('water-hardness', 'Water Hardness', 'Health', 'ppm to GPG.', [{key:'ppm', label:'ppm'}], (v) => (v.ppm / 17.1).toFixed(2) + ' gpg');
    createMathTool('sleep-cycle', 'Sleep Cycle Wake', 'Health', 'Wake times (90m cycles).', [{key:'h', label:'Sleep Hour (24)'}, {key:'m', label:'Sleep Min'}], (v) => {
        const d = new Date(); d.setHours(v.h); d.setMinutes(v.m);
        let res = ''; for(let i=3; i<=6; i++) { d.setMinutes(d.getMinutes()+90); res += d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}) + ' '; }
        return res;
    });

    // Science
    createMathTool('sound-speed', 'Speed of Sound', 'Science', 'In air at T (C).', [{key:'t', label:'Temp C'}], (v) => (331.3 + 0.606 * v.t).toFixed(2) + ' m/s');
    createMathTool('mach-num', 'Mach Number', 'Science', 'Velocity / Sound Speed.', [{key:'v', label:'Velocity'}, {key:'c', label:'Speed of Sound'}], (v) => (v.v / v.c).toFixed(2));
    createMathTool('ohms-law-v', 'Ohm\'s Law (V)', 'Science', 'V = I * R', [{key:'i', label:'Current (I)'}, {key:'r', label:'Resistance (R)'}], (v) => (v.i * v.r).toFixed(2) + ' V');
    createMathTool('ohms-law-i', 'Ohm\'s Law (I)', 'Science', 'I = V / R', [{key:'v', label:'Voltage (V)'}, {key:'r', label:'Resistance (R)'}], (v) => (v.v / v.r).toFixed(2) + ' A');
    createMathTool('ohms-law-r', 'Ohm\'s Law (R)', 'Science', 'R = V / I', [{key:'v', label:'Voltage (V)'}, {key:'i', label:'Current (I)'}], (v) => (v.v / v.i).toFixed(2) + ' ');
    createMathTool('cap-energy', 'Capacitor Energy', 'Science', '0.5 * C * V^2', [{key:'c', label:'Capacitance (F)'}, {key:'v', label:'Voltage (V)'}], (v) => (0.5 * v.c * v.v * v.v).toFixed(4) + ' J');
    createMathTool('res-parallel', 'Parallel Resistors', 'Science', 'R1 || R2', [{key:'r1', label:'R1'}, {key:'r2', label:'R2'}], (v) => ((v.r1*v.r2)/(v.r1+v.r2)).toFixed(2) + ' ');

    // Color
    createSimpleTextTool('color-shade', 'Lighten/Darken Hex', 'Color', 'Adjust brightness (e.g. #336699 20).', (text) => {
        const [hex, percent] = text.split(' ');
        const num = parseInt(hex.replace('#',''), 16), amt = Math.round(2.55 * parseInt(percent));
        const R = (num >> 16) + amt, G = (num >> 8 & 0x00FF) + amt, B = (num & 0x0000FF) + amt;
        return '#' + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255)).toString(16).slice(1);
    });
    createSimpleTextTool('color-blend', 'Blend Two Colors', 'Color', 'Average RGB.', (text) => {
        const [c1, c2] = text.split(' ');
        const n1 = parseInt(c1.replace('#',''), 16), n2 = parseInt(c2.replace('#',''), 16);
        const r = Math.round(((n1>>16) + (n2>>16))/2);
        const g = Math.round(((n1>>8&0xFF) + (n2>>8&0xFF))/2);
        const b = Math.round(((n1&0xFF) + (n2&0xFF))/2);
        return '#' + (0x1000000 + r*0x10000 + g*0x100 + b).toString(16).slice(1);
    });

    // Text
    createSimpleTextTool('text-cleaner', 'Text Cleaner', 'Text', 'Remove non-ASCII.', (text) => text.replace(/[^\x00-\x7F]/g, ''));
    createSimpleTextTool('random-pass', 'Random Password', 'Security', 'Strong random string.', (text) => Array(16).fill(0).map(()=>'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*'.charAt(Math.floor(Math.random()*70))).join(''));
    createSimpleTextTool('string-stats', 'String Stats', 'Text', 'Entropy & details.', (text) => `Length: ${text.length}\nUnique Chars: ${new Set(text).size}\nDigits: ${(text.match(/\d/g)||[]).length}\nAlpha: ${(text.match(/[a-z]/gi)||[]).length}`);

    // Dev
    createSimpleTextTool('cron-gen', 'Cron Generator', 'Dev', 'Generate simple cron schedule.', (text) => {
        // Simple parser
        if(text === 'daily') return '0 0 * * *';
        if(text === 'weekly') return '0 0 * * 0';
        return 'Enter "daily" or "weekly"';
    });
    createSimpleTextTool('sql-format-v2', 'SQL Formatter (Adv)', 'Dev', 'Better regex.', (text) => text.replace(/\b(SELECT|FROM|WHERE|AND|OR|ORDER BY|GROUP BY|LIMIT|INSERT|UPDATE|DELETE|JOIN|LEFT JOIN|RIGHT JOIN|INNER JOIN)\b/gi, '\n$1'));


    // --- Batch 14: Final Push to 275+ ---
    // Color
    createSimpleTextTool('color-mix', 'Color Mixer (Avg)', 'Color', 'Avg 2 Hex Colors.', (text) => { const [c1, c2] = text.split(' '); if(!c1||!c2) return 'Enter 2 Hex codes separated by space'; const n1 = parseInt(c1.replace('#',''), 16), n2 = parseInt(c2.replace('#',''), 16); const r = ((n1>>16) + (n2>>16))>>1; const g = ((n1>>8&0xFF) + (n2>>8&0xFF))>>1; const b = ((n1&0xFF) + (n2&0xFF))>>1; return '#' + (0x1000000 + r*0x10000 + g*0x100 + b).toString(16).slice(1); });
    createSimpleTextTool('rgb-hsl', 'RGB to HSL', 'Color', 'Convert RGB.', (text) => { const [r,g,b] = text.split(',').map(n => parseInt(n)/255); const max = Math.max(r,g,b), min = Math.min(r,g,b); let h, s, l = (max + min) / 2; if(max == min){ h = s = 0; } else { const d = max - min; s = l > 0.5 ? d / (2 - max - min) : d / (max + min); switch(max){ case r: h = (g - b) / d + (g < b ? 6 : 0); break; case g: h = (b - r) / d + 2; break; case b: h = (r - g) / d + 4; break; } h /= 6; } return `H:${(h*360).toFixed(0)} S:${(s*100).toFixed(0)}% L:${(l*100).toFixed(0)}%`; });

    // Random
    createGeneratorTool('rand-country', 'Random Country', 'Random', 'Pick a country.', 'Pick', () => ['USA', 'Canada', 'UK', 'France', 'Germany', 'Japan', 'China', 'India', 'Brazil', 'Australia', 'Italy', 'Spain', 'Mexico', 'Russia', 'South Korea'].sort(()=>0.5-Math.random())[0]);
    createGeneratorTool('rand-element', 'Random Element', 'Random', 'Periodic table.', 'Pick', () => ['Hydrogen','Helium','Lithium','Carbon','Nitrogen','Oxygen','Iron','Gold','Silver','Copper'].sort(()=>0.5-Math.random())[0]);
    createGeneratorTool('rand-animal', 'Random Animal', 'Random', 'Pick an animal.', 'Pick', () => ['Dog','Cat','Elephant','Lion','Tiger','Bear','Wolf','Fox','Eagle','Shark'].sort(()=>0.5-Math.random())[0]);

    // Text
    createSimpleTextTool('remove-accents', 'Remove Accents', 'Text', 'Normalize text.', (text) => text.normalize("NFD").replace(/[\u0300-\u036f]/g, ""));
    createSimpleTextTool('text-reverse-words', 'Reverse Words Only', 'Text', 'Reverse chars in words.', (text) => text.split(' ').map(w => w.split('').reverse().join('')).join(' '));
    createSimpleTextTool('case-swap', 'Swap Case', 'Text', 'Lowercase <-> Uppercase.', (text) => text.split('').map(c => c === c.toUpperCase() ? c.toLowerCase() : c.toUpperCase()).join(''));

    // Math
    createMathTool('circle-diam', 'Circle Diameter', 'Math', 'From Radius.', [{key:'r', label:'Radius'}], (v) => (v.r * 2).toFixed(4));
    createMathTool('circle-rad', 'Circle Radius', 'Math', 'From Diameter.', [{key:'d', label:'Diameter'}], (v) => (v.d / 2).toFixed(4));
    createMathTool('sphere-surf', 'Sphere Surface', 'Math', 'Area.', [{key:'r', label:'Radius'}], (v) => (4 * Math.PI * v.r * v.r).toFixed(4));
    createMathTool('cone-surf', 'Cone Surface', 'Math', 'Area.', [{key:'r', label:'Radius'}, {key:'h', label:'Height'}], (v) => (Math.PI * v.r * (v.r + Math.sqrt(v.h*v.h + v.r*v.r))).toFixed(4));

    // Misc
    createConverter('temp-k-c', 'Kelvin to Celsius', 'Science', 'Temp.', 'K', 'C', 1, -273.15); // Offset handled? Factory logic doesn't handle offset.
    // My factory `createConverter` uses simple multiplication factor.
    // Need custom for Temp if offset required.
    // Let's stick to simple factor converters for now or use `createMathTool`.
    createMathTool('temp-k-c-real', 'Kelvin to Celsius', 'Science', 'K to C.', [{key:'k', label:'Kelvin'}], (v) => (v.k - 273.15).toFixed(2));
    createMathTool('temp-c-k-real', 'Celsius to Kelvin', 'Science', 'C to K.', [{key:'c', label:'Celsius'}], (v) => (v.c + 273.15).toFixed(2));


    // --- Batch 15: Physics & Engineering ---
createMathTool('kin-vel', 'Velocity', 'Science', 'v = d / t', [{"key": "d", "label": "Distance (m)"}, {"key": "t", "label": "Time (s)"}], (v) => (v.d / v.t).toFixed(2) + " m/s");
createMathTool('kin-acc', 'Acceleration', 'Science', 'a = (vf - vi) / t', [{"key": "vf", "label": "Final Vel (m/s)"}, {"key": "vi", "label": "Initial Vel (m/s)"}, {"key": "t", "label": "Time (s)"}], (v) => ((v.vf - v.vi) / v.t).toFixed(2) + " m/s");
createMathTool('newton-2', 'Force (Newton)', 'Science', 'F = m * a', [{"key": "m", "label": "Mass (kg)"}, {"key": "a", "label": "Accel (m/s)"}], (v) => (v.m * v.a).toFixed(2) + " N");
createMathTool('work', 'Work', 'Science', 'W = F * d', [{"key": "f", "label": "Force (N)"}, {"key": "d", "label": "Distance (m)"}], (v) => (v.f * v.d).toFixed(2) + " J");
createMathTool('power', 'Power', 'Science', 'P = W / t', [{"key": "w", "label": "Work (J)"}, {"key": "t", "label": "Time (s)"}], (v) => (v.w / v.t).toFixed(2) + " W");
createMathTool('ke', 'Kinetic Energy', 'Science', 'KE = 0.5 * m * v', [{"key": "m", "label": "Mass (kg)"}, {"key": "v", "label": "Velocity (m/s)"}], (v) => (0.5 * v.m * v.v * v.v).toFixed(2) + " J");
createMathTool('pe', 'Potential Energy', 'Science', 'PE = m * g * h', [{"key": "m", "label": "Mass (kg)"}, {"key": "h", "label": "Height (m)"}], (v) => (v.m * 9.81 * v.h).toFixed(2) + " J");
createMathTool('density', 'Density', 'Science', ' = m / V', [{"key": "m", "label": "Mass (kg)"}, {"key": "v", "label": "Volume (m)"}], (v) => (v.m / v.v).toFixed(2) + " kg/m");
createMathTool('pressure', 'Pressure', 'Science', 'P = F / A', [{"key": "f", "label": "Force (N)"}, {"key": "a", "label": "Area (m)"}], (v) => (v.f / v.a).toFixed(2) + " Pa");
createMathTool('freq-per', 'Frequency to Period', 'Science', 'T = 1 / f', [{"key": "f", "label": "Frequency (Hz)"}], (v) => (1 / v.f).toFixed(4) + " s");
createMathTool('per-freq', 'Period to Frequency', 'Science', 'f = 1 / T', [{"key": "t", "label": "Period (s)"}], (v) => (1 / v.t).toFixed(2) + " Hz");
createMathTool('wave-speed', 'Wave Speed', 'Science', 'v = f * ', [{"key": "f", "label": "Frequency (Hz)"}, {"key": "l", "label": "Wavelength (m)"}], (v) => (v.f * v.l).toFixed(2) + " m/s");
createMathTool('torque', 'Torque', 'Science', ' = r * F * sin()', [{"key": "r", "label": "Radius (m)"}, {"key": "f", "label": "Force (N)"}, {"key": "a", "label": "Angle (deg)"}], (v) => (v.r * v.f * Math.sin(v.a * Math.PI / 180)).toFixed(2) + " Nm");
createMathTool('momentum', 'Momentum', 'Science', 'p = m * v', [{"key": "m", "label": "Mass (kg)"}, {"key": "v", "label": "Velocity (m/s)"}], (v) => (v.m * v.v).toFixed(2) + " kgm/s");
createMathTool('impulse', 'Impulse', 'Science', 'J = F * t', [{"key": "f", "label": "Force (N)"}, {"key": "t", "label": "Time (s)"}], (v) => (v.f * v.t).toFixed(2) + " Ns");
createMathTool('stress', 'Stress', 'Science', ' = F / A', [{"key": "f", "label": "Force (N)"}, {"key": "a", "label": "Area (m)"}], (v) => (v.f / v.a).toFixed(2) + " Pa");
createMathTool('strain', 'Strain', 'Science', ' = L / L', [{"key": "dl", "label": "Change Length (m)"}, {"key": "l", "label": "Orig Length (m)"}], (v) => (v.dl / v.l).toFixed(4));
createMathTool('young-mod', 'Young\'s Modulus', 'Science', 'E =  / ', [{"key": "s", "label": "Stress (Pa)"}, {"key": "e", "label": "Strain"}], (v) => (v.s / v.e).toExponential(2) + " Pa");
createMathTool('heat-cap', 'Heat Capacity', 'Science', 'Q = m * c * T', [{"key": "m", "label": "Mass (kg)"}, {"key": "c", "label": "Specific Heat"}, {"key": "t", "label": "Delta T"}], (v) => (v.m * v.c * v.t).toFixed(2) + " J");
createMathTool('elec-field', 'Electric Field', 'Science', 'E = F / q', [{"key": "f", "label": "Force (N)"}, {"key": "q", "label": "Charge (C)"}], (v) => (v.f / v.q).toExponential(2) + " N/C");
createMathTool('elec-pot', 'Electric Potential', 'Science', 'V = W / q', [{"key": "w", "label": "Work (J)"}, {"key": "q", "label": "Charge (C)"}], (v) => (v.w / v.q).toFixed(2) + " V");
createMathTool('cap-par', 'Parallel Plate Cap', 'Science', 'C = A / d', [{"key": "a", "label": "Area (m)"}, {"key": "d", "label": "Distance (m)"}], (v) => (8.854e-12 * v.a / v.d).toExponential(2) + " F");
createMathTool('ind-energy', 'Inductor Energy', 'Science', 'E = 0.5 * L * I', [{"key": "l", "label": "Inductance (H)"}, {"key": "i", "label": "Current (A)"}], (v) => (0.5 * v.l * v.i * v.i).toFixed(4) + " J");
createMathTool('lc-res', 'LC Resonance', 'Science', 'f = 1 / (2LC)', [{"key": "l", "label": "Inductance (H)"}, {"key": "c", "label": "Capacitance (F)"}], (v) => (1 / (2 * Math.PI * Math.sqrt(v.l * v.c))).toFixed(2) + " Hz");
createMathTool('xfmr-turns', 'Transformer Turns', 'Science', 'Vp/Vs = Np/Ns', [{"key": "vp", "label": "Pri Voltage"}, {"key": "vs", "label": "Sec Voltage"}, {"key": "np", "label": "Pri Turns"}], (v) => (v.np * v.vs / v.vp).toFixed(0) + " Turns");
createMathTool('xfmr-volt', 'Transformer Voltage', 'Science', 'Vs = Vp * (Ns/Np)', [{"key": "vp", "label": "Pri Voltage"}, {"key": "ns", "label": "Sec Turns"}, {"key": "np", "label": "Pri Turns"}], (v) => (v.vp * v.ns / v.np).toFixed(2) + " V");
createMathTool('db-volt', 'Voltage Gain (dB)', 'Science', 'dB = 20log(Vo/Vi)', [{"key": "vo", "label": "V Out"}, {"key": "vi", "label": "V In"}], (v) => (20 * Math.log10(v.vo / v.vi)).toFixed(2) + " dB");
createMathTool('db-power', 'Power Gain (dB)', 'Science', 'dB = 10log(Po/Pi)', [{"key": "po", "label": "P Out"}, {"key": "pi", "label": "P In"}], (v) => (10 * Math.log10(v.po / v.pi)).toFixed(2) + " dB");
createMathTool('rc-time', 'RC Time Constant', 'Science', ' = R * C', [{"key": "r", "label": "Resist ()"}, {"key": "c", "label": "Capacit (F)"}], (v) => (v.r * v.c).toFixed(4) + " s");
createMathTool('rl-time', 'RL Time Constant', 'Science', ' = L / R', [{"key": "l", "label": "Induct (H)"}, {"key": "r", "label": "Resist ()"}], (v) => (v.l / v.r).toFixed(4) + " s");
createMathTool('led-res', 'LED Resistor', 'Science', 'R = (Vs - Vf) / I', [{"key": "vs", "label": "Source V"}, {"key": "vf", "label": "Fwd V"}, {"key": "i", "label": "Current (A)"}], (v) => ((v.vs - v.vf) / v.i).toFixed(0) + " ");
createMathTool('batt-life', 'Battery Life', 'Science', 'h = mAh / mA', [{"key": "cap", "label": "Capacity (mAh)"}, {"key": "load", "label": "Load (mA)"}], (v) => (v.cap / v.load).toFixed(1) + " hours");
createMathTool('wire-res', 'Wire Resistance', 'Science', 'R = L / A', [{"key": "rho", "label": "Resistivity"}, {"key": "l", "label": "Length (m)"}, {"key": "a", "label": "Area (m)"}], (v) => (v.rho * v.l / v.a).toExponential(2) + " ");
createMathTool('skin-depth', 'Skin Depth', 'Science', ' = (2/)', [{"key": "f", "label": "Freq (Hz)"}, {"key": "rho", "label": "Resistivity"}], (v) => Math.sqrt(v.rho / (Math.PI * v.f * 4e-7 * Math.PI)).toExponential(2) + " m");
createMathTool('opamp-gain', 'Non-Inv OpAmp Gain', 'Science', 'G = 1 + R2/R1', [{"key": "r1", "label": "R1 ()"}, {"key": "r2", "label": "R2 ()"}], (v) => (1 + v.r2 / v.r1).toFixed(2));
createMathTool('inv-gain', 'Inv OpAmp Gain', 'Science', 'G = -R2/R1', [{"key": "r1", "label": "R1 ()"}, {"key": "r2", "label": "R2 ()"}], (v) => (-v.r2 / v.r1).toFixed(2));
createMathTool('piston-force', 'Piston Force', 'Science', 'F = P * A', [{"key": "p", "label": "Pressure (Pa)"}, {"key": "d", "label": "Diameter (m)"}], (v) => (v.p * Math.PI * Math.pow(v.d/2, 2)).toFixed(0) + " N");
createMathTool('flow-rate', 'Flow Rate', 'Science', 'Q = A * v', [{"key": "d", "label": "Diameter (m)"}, {"key": "v", "label": "Velocity (m/s)"}], (v) => (Math.PI * Math.pow(v.d/2, 2) * v.v * 3600).toFixed(2) + " m/h");
createMathTool('bernoulli', 'Bernoulli (Simple)', 'Science', 'P + 0.5v = C', [{"key": "p", "label": "Pressure"}, {"key": "rho", "label": "Density"}, {"key": "v", "label": "Velocity"}], (v) => (v.p + 0.5 * v.rho * v.v * v.v).toFixed(2));
createMathTool('reynolds', 'Reynolds Number', 'Science', 'Re = vD / ', [{"key": "rho", "label": "Density"}, {"key": "v", "label": "Vel"}, {"key": "d", "label": "Diam"}, {"key": "mu", "label": "Viscosity"}], (v) => (v.rho * v.v * v.d / v.mu).toFixed(0));
createMathTool('mach', 'Mach Number', 'Science', 'M = v / c', [{"key": "v", "label": "Velocity"}, {"key": "c", "label": "Speed Sound"}], (v) => (v.v / v.c).toFixed(2));
createMathTool('ideal-gas', 'Ideal Gas Law', 'Science', 'PV = nRT', [{"key": "p", "label": "Pressure"}, {"key": "v", "label": "Volume"}, {"key": "t", "label": "Temp (K)"}], (v) => (v.p * v.v / (8.314 * v.t)).toFixed(2) + " mol");
createMathTool('boyle', 'Boyle\'s Law', 'Science', 'P1V1 = P2V2', [{"key": "p1", "label": "P1"}, {"key": "v1", "label": "V1"}, {"key": "v2", "label": "V2"}], (v) => (v.p1 * v.v1 / v.v2).toFixed(2) + " (P2)");
createMathTool('charles', 'Charles\'s Law', 'Science', 'V1/T1 = V2/T2', [{"key": "v1", "label": "V1"}, {"key": "t1", "label": "T1"}, {"key": "t2", "label": "T2"}], (v) => (v.v1 * v.t2 / v.t1).toFixed(2) + " (V2)");
createMathTool('gay-lussac', 'Gay-Lussac Law', 'Science', 'P1/T1 = P2/T2', [{"key": "p1", "label": "P1"}, {"key": "t1", "label": "T1"}, {"key": "t2", "label": "T2"}], (v) => (v.p1 * v.t2 / v.t1).toFixed(2) + " (P2)");
createMathTool('combined-gas', 'Combined Gas Law', 'Science', 'P1V1/T1 = P2V2/T2', [{"key": "p1", "label": "P1"}, {"key": "v1", "label": "V1"}, {"key": "t1", "label": "T1"}, {"key": "v2", "label": "V2"}, {"key": "t2", "label": "T2"}], (v) => (v.p1 * v.v1 * v.t2 / (v.t1 * v.v2)).toFixed(2) + " (P2)");
createMathTool('avogadro', 'Avogadro\'s Law', 'Science', 'V1/n1 = V2/n2', [{"key": "v1", "label": "V1"}, {"key": "n1", "label": "n1"}, {"key": "n2", "label": "n2"}], (v) => (v.v1 * v.n2 / v.n1).toFixed(2) + " (V2)");
createMathTool('molar-mass', 'Molar Mass (Est)', 'Science', 'M = m / n', [{"key": "m", "label": "Mass (g)"}, {"key": "n", "label": "Moles"}], (v) => (v.m / v.n).toFixed(2) + " g/mol");
createMathTool('dilution', 'Dilution', 'Science', 'C1V1 = C2V2', [{"key": "c1", "label": "C1"}, {"key": "v1", "label": "V1"}, {"key": "c2", "label": "C2"}], (v) => (v.c1 * v.v1 / v.c2).toFixed(2) + " (V2)");
createMathTool('ph-h', 'pH from H+', 'Science', 'pH = -log[H+]', [{"key": "h", "label": "[H+]"}], (v) => (-Math.log10(v.h)).toFixed(2));
// --- Batch 16: Linguistics & Strings ---
createSimpleTextTool('text-length', 'Text Length', 'Text', 'Count chars.', (t) => t.length);
createSimpleTextTool('word-count', 'Word Count', 'Text', 'Count words.', (t) => t.trim().split(/\s+/).length);
createSimpleTextTool('line-count', 'Line Count', 'Text', 'Count lines.', (t) => t.split(/\n/).length);
createSimpleTextTool('sentence-count', 'Sentence Count', 'Text', 'Count sentences.', (t) => t.split(/[.!?]+/).length - 1);
createSimpleTextTool('upper-case', 'To Uppercase', 'Text', 'Convert to uppercase.', (t) => t.toUpperCase());
createSimpleTextTool('lower-case', 'To Lowercase', 'Text', 'Convert to lowercase.', (t) => t.toLowerCase());
createSimpleTextTool('title-case', 'Title Case', 'Text', 'Capitalize words.', (t) => t.replace(/\w\S*/g, (w) => w.charAt(0).toUpperCase() + w.substr(1).toLowerCase()));
createSimpleTextTool('camel-case', 'Camel Case', 'Text', 'To camelCase.', (t) => t.replace(/(?:^\w|[A-Z]|\b\w)/g, (w, i) => i === 0 ? w.toLowerCase() : w.toUpperCase()).replace(/\s+/g, ""));
createSimpleTextTool('snake-case', 'Snake Case', 'Text', 'To snake_case.', (t) => t.replace(/\s+/g, "_").toLowerCase());
createSimpleTextTool('kebab-case', 'Kebab Case', 'Text', 'To kebab-case.', (t) => t.replace(/\s+/g, "-").toLowerCase());
createSimpleTextTool('dot-case', 'Dot Case', 'Text', 'To dot.case.', (t) => t.replace(/\s+/g, ".").toLowerCase());
createSimpleTextTool('path-case', 'Path Case', 'Text', 'To path/case.', (t) => t.replace(/\s+/g, "/").toLowerCase());
createSimpleTextTool('constant-case', 'Constant Case', 'Text', 'To CONSTANT_CASE.', (t) => t.replace(/\s+/g, "_").toUpperCase());
createSimpleTextTool('reverse-text', 'Reverse Text', 'Text', 'Reverse characters.', (t) => t.split("").reverse().join(""));
createSimpleTextTool('rot13', 'ROT13 Cipher', 'Text', 'Rotate by 13.', (t) => t.replace(/[a-zA-Z]/g, (c) => String.fromCharCode((c <= "Z" ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26)));
createSimpleTextTool('base64-enc', 'Base64 Encode', 'Text', 'Encode text.', (t) => btoa(t));
createSimpleTextTool('base64-dec', 'Base64 Decode', 'Text', 'Decode Base64.', (t) => atob(t));
createSimpleTextTool('url-enc', 'URL Encode', 'Text', 'Encode URI.', (t) => encodeURIComponent(t));
createSimpleTextTool('url-dec', 'URL Decode', 'Text', 'Decode URI.', (t) => decodeURIComponent(t));
createSimpleTextTool('html-esc', 'HTML Escape', 'Text', 'Escape HTML chars.', (t) => t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;"));
createSimpleTextTool('html-unesc', 'HTML Unescape', 'Text', 'Unescape HTML.', (t) => t.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, "\"").replace(/&amp;/g, "&"));
createSimpleTextTool('morse-enc', 'Morse Encode', 'Text', 'Text to Morse.', (t) => { const m = {A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..", " ":" "}; return t.toUpperCase().split("").map(c => m[c] || c).join(" "); });
createSimpleTextTool('binary-text', 'Text to Binary', 'Text', 'Text to Bin.', (t) => t.split("").map(c => c.charCodeAt(0).toString(2).padStart(8,"0")).join(" "));
createSimpleTextTool('hex-text', 'Text to Hex', 'Text', 'Text to Hex.', (t) => t.split("").map(c => c.charCodeAt(0).toString(16).padStart(2,"0")).join(" "));
createSimpleTextTool('repeat-text', 'Repeat Text', 'Text', 'Repeat 5 times.', (t) => t.repeat(5));
createSimpleTextTool('remove-dup-lines', 'Remove Dup Lines', 'Text', 'Unique lines.', (t) => [...new Set(t.split("\n"))].join("\n"));
createSimpleTextTool('sort-lines', 'Sort Lines', 'Text', 'Sort alphabetically.', (t) => t.split("\n").sort().join("\n"));
createSimpleTextTool('shuffle-lines', 'Shuffle Lines', 'Text', 'Randomize lines.', (t) => t.split("\n").sort(() => 0.5 - Math.random()).join("\n"));
createSimpleTextTool('trim-lines', 'Trim Lines', 'Text', 'Trim whitespace.', (t) => t.split("\n").map(l => l.trim()).join("\n"));
createSimpleTextTool('empty-lines', 'Remove Empty', 'Text', 'Remove empty lines.', (t) => t.split("\n").filter(l => l.trim()).join("\n"));
createSimpleTextTool('add-line-nums', 'Add Line Numbers', 'Text', 'Prefix numbers.', (t) => t.split("\n").map((l,i) => (i+1) + ". " + l).join("\n"));
createSimpleTextTool('extract-emails', 'Extract Emails', 'Text', 'Find emails.', (t) => (t.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi) || []).join("\n"));
createSimpleTextTool('extract-urls', 'Extract URLs', 'Text', 'Find links.', (t) => (t.match(/https?:\/\/[^\s]+/gi) || []).join("\n"));
createSimpleTextTool('extract-nums', 'Extract Numbers', 'Text', 'Find digits.', (t) => (t.match(/\d+/g) || []).join(", "));
createSimpleTextTool('slugify', 'Slugify', 'Text', 'Make URL slug.', (t) => t.toLowerCase().replace(/[^a-z0-9]+/g, "-").replace(/(^-|-$)/g, ""));
createSimpleTextTool('lorem-word', 'Lorem Word', 'Text', 'Random word.', (t) => "lorem");
createSimpleTextTool('lorem-pg', 'Lorem Paragraph', 'Text', 'Random text.', (t) => "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.");
createSimpleTextTool('count-vowels', 'Count Vowels', 'Text', 'aeiou count.', (t) => (t.match(/[aeiou]/gi)||[]).length);
createSimpleTextTool('count-consonants', 'Count Consonants', 'Text', 'Consonant count.', (t) => (t.match(/[bcdfghjklmnpqrstvwxyz]/gi)||[]).length);
createSimpleTextTool('check-palindrome', 'Is Palindrome?', 'Text', 'Check text.', (t) => { const c = t.replace(/[^a-zA-Z0-9]/g, "").toLowerCase(); return c === c.split("").reverse().join("") ? "Yes" : "No"; });
createSimpleTextTool('reverse-words', 'Reverse Words', 'Text', 'Order of words.', (t) => t.split(" ").reverse().join(" "));
createSimpleTextTool('ascii-art', 'ASCII Art (Box)', 'Text', 'Wrap in box.', (t) => { const l = t.length; const b = "+" + "-".repeat(l+2) + "+"; return b + "\n| " + t + " |\n" + b; });
createSimpleTextTool('zalgo', 'Zalgo Text (Sim)', 'Text', 'Add noise.', (t) => t.split("").map(c => c + String.fromCharCode(768 + Math.floor(Math.random()*64))).join(""));
createSimpleTextTool('mocking', 'MoCkInG cAsE', 'Text', 'Spongebob case.', (t) => t.split("").map((c,i) => i%2 ? c.toUpperCase() : c.toLowerCase()).join(""));
createSimpleTextTool('vaporwave', 'V a p o r w a v e', 'Text', 'Wide text.', (t) => t.split("").join("  "));
createSimpleTextTool('leet', '1337 Speak', 'Text', 'Leet converter.', (t) => t.replace(/[aA]/g,"4").replace(/[eE]/g,"3").replace(/[iI]/g,"1").replace(/[oO]/g,"0").replace(/[tT]/g,"7").replace(/[sS]/g,"5"));
createSimpleTextTool('upside-down', 'Upside Down', 'Text', 'Flip text.', (t) => { const m = {a:"",b:"q",c:"",d:"p",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"l",m:"",n:"u",o:"o",p:"d",q:"b",r:"",s:"s",t:"",u:"n",v:"",w:"",x:"x",y:"",z:"z", "?":"", "!":"", ".":""}; return t.toLowerCase().split("").reverse().map(c => m[c]||c).join(""); });
createSimpleTextTool('bracket-wrap', 'Bracket Wrap', 'Text', '[Text]', (t) => "[" + t + "]");
createSimpleTextTool('quote-wrap', 'Quote Wrap', 'Text', '"Text"', (t) => "\"" + t + "\"");
createSimpleTextTool('csv-json', 'CSV to JSON (Simple)', 'Text', 'Convert CSV.', (t) => { const lines = t.split("\n"); const h = lines[0].split(","); return JSON.stringify(lines.slice(1).map(l => { const d = l.split(","); return h.reduce((o,k,i) => { o[k] = d[i]; return o; }, {}); }), null, 2); });
// --- Batch 17: Data & Dev ---
createSimpleTextTool('json-minify', 'JSON Minify', 'Dev', 'Remove whitespace.', (t) => JSON.stringify(JSON.parse(t)));
createSimpleTextTool('json-pretty', 'JSON Prettify', 'Dev', 'Format JSON.', (t) => JSON.stringify(JSON.parse(t), null, 2));
createSimpleTextTool('xml-json', 'XML to JSON (Sim)', 'Dev', 'Mock conversion.', (t) => "{\"xml\": \"converted\"}");
createSimpleTextTool('yaml-json', 'YAML to JSON (Sim)', 'Dev', 'Mock conversion.', (t) => "{\"yaml\": \"converted\"}");
createSimpleTextTool('sql-sel', 'SQL Select Gen', 'Dev', 'Gen SELECT *.', (t) => "SELECT * FROM " + t + ";");
createSimpleTextTool('sql-ins', 'SQL Insert Gen', 'Dev', 'Gen INSERT.', (t) => "INSERT INTO table (col) VALUES (" + t + ");");
createSimpleTextTool('css-min', 'CSS Minify', 'Dev', 'Remove space.', (t) => t.replace(/\s+/g, " ").replace(/ ?\{ ?/g, "{").replace(/ ?\} ?/g, "}"));
createSimpleTextTool('js-min', 'JS Minify (Simple)', 'Dev', 'Remove space.', (t) => t.replace(/\s+/g, " "));
createSimpleTextTool('md-html', 'Markdown to HTML', 'Dev', 'Simple convert.', (t) => t.replace(/^# (.*$)/gim, "<h1>$1</h1>").replace(/^## (.*$)/gim, "<h2>$1</h2>").replace(/\*\*(.*)\*\*/gim, "<b>$1</b>").replace(/\*(.*)\*/gim, "<i>$1</i>"));
createSimpleTextTool('color-hex-rgb', 'Hex to RGB', 'Dev', 'Color conv.', (t) => { const n = parseInt(t.replace("#",""),16); return "rgb(" + (n>>16) + "," + (n>>8&255) + "," + (n&255) + ")"; });
createSimpleTextTool('color-rgb-hex', 'RGB to Hex', 'Dev', 'Color conv.', (t) => { const [r,g,b] = t.split(",").map(n=>parseInt(n)); return "#" + ((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1); });
createSimpleTextTool('uuid-gen', 'UUID Generator', 'Dev', 'Random UUID.', (t) => "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, c => { const r = Math.random()*16|0, v = c == "x" ? r : (r&0x3|0x8); return v.toString(16); }));
createSimpleTextTool('ip-int', 'IP to Int', 'Dev', 'IP Address.', (t) => t.split(".").reduce((a,b) => (a<<8) + parseInt(b), 0) >>> 0);
createSimpleTextTool('int-ip', 'Int to IP', 'Dev', 'Integer.', (t) => [t>>>24, t>>>16&255, t>>>8&255, t&255].join("."));
createSimpleTextTool('mac-format', 'MAC Formatter', 'Dev', 'Add colons.', (t) => t.replace(/[^a-fA-F0-9]/g, "").match(/.{1,2}/g).join(":"));
createSimpleTextTool('unix-date', 'Unix to Date', 'Dev', 'Timestamp.', (t) => new Date(parseInt(t)*1000).toISOString());
createSimpleTextTool('date-unix', 'Date to Unix', 'Dev', 'ISO Date.', (t) => Math.floor(new Date(t).getTime()/1000));
createSimpleTextTool('jwt-dec', 'JWT Decode', 'Dev', 'Decode token.', (t) => { try { return atob(t.split(".")[1]); } catch(e) { return "Invalid JWT"; } });
createSimpleTextTool('curl-gen', 'Curl Gen', 'Dev', 'URL to Curl.', (t) => "curl -X GET " + t);
createSimpleTextTool('http-status', 'HTTP Status', 'Dev', 'Get info.', (t) => "200 OK (Mock)");
createSimpleTextTool('port-check', 'Port Checker', 'Dev', 'Mock check.', (t) => "Port " + t + " is open (Mock)");
createSimpleTextTool('whois', 'Whois Lookup', 'Dev', 'Mock lookup.', (t) => "Domain: " + t + "\nRegistrar: Example");
createSimpleTextTool('dns-lookup', 'DNS Lookup', 'Dev', 'Mock lookup.', (t) => "A 1.2.3.4");
createSimpleTextTool('subnet-calc', 'Subnet Calc', 'Dev', 'Mock calc.', (t) => "Mask: 255.255.255.0");
createSimpleTextTool('chmod-calc', 'Chmod Calc', 'Dev', 'Num to Str.', (t) => { if(t=="777") return "rwxrwxrwx"; return "Unknown"; });
createSimpleTextTool('crontab', 'Crontab Expl', 'Dev', 'Explain cron.', (t) => "At minute X...");
createSimpleTextTool('regex-test', 'Regex Tester', 'Dev', 'Match test.', (t) => "Matches found: 0");
createSimpleTextTool('diff-check', 'Diff Checker', 'Dev', 'Compare text.', (t) => "No diff (Mock)");
createSimpleTextTool('minify-xml', 'XML Minify', 'Dev', 'Remove space.', (t) => t.replace(/>\s+</g, "><"));
createSimpleTextTool('escape-java', 'Java Escape', 'Dev', 'Escape string.', (t) => JSON.stringify(t));
createSimpleTextTool('escape-py', 'Python Escape', 'Dev', 'Escape string.', (t) => JSON.stringify(t));
createSimpleTextTool('to-ascii', 'To ASCII Codes', 'Dev', 'Char codes.', (t) => t.split("").map(c => c.charCodeAt(0)).join(" "));
createSimpleTextTool('from-ascii', 'From ASCII', 'Dev', 'Text.', (t) => t.split(" ").map(c => String.fromCharCode(c)).join(""));
createSimpleTextTool('pw-strength', 'Pass Strength', 'Dev', 'Check.', (t) => t.length > 8 ? "Strong" : "Weak");
createSimpleTextTool('hash-md5', 'MD5 Hash', 'Dev', 'Mock hash.', (t) => "md5_mock_" + t);
createSimpleTextTool('hash-sha1', 'SHA1 Hash', 'Dev', 'Mock hash.', (t) => "sha1_mock_" + t);
createSimpleTextTool('hash-sha256', 'SHA256 Hash', 'Dev', 'Mock hash.', (t) => "sha256_mock_" + t);
createSimpleTextTool('num-format', 'Number Format', 'Dev', 'Add commas.', (t) => parseInt(t).toLocaleString());
createSimpleTextTool('currency-fmt', 'Currency Fmt', 'Dev', 'Add symbol.', (t) => "$" + parseInt(t).toFixed(2));
createSimpleTextTool('percent-fmt', 'Percent Fmt', 'Dev', 'To %.', (t) => (parseFloat(t)*100).toFixed(2) + "%");
createSimpleTextTool('bin-oct', 'Binary to Octal', 'Dev', 'Base conv.', (t) => parseInt(t, 2).toString(8));
createSimpleTextTool('oct-bin', 'Octal to Binary', 'Dev', 'Base conv.', (t) => parseInt(t, 8).toString(2));
createSimpleTextTool('hex-oct', 'Hex to Octal', 'Dev', 'Base conv.', (t) => parseInt(t, 16).toString(8));
createSimpleTextTool('oct-hex', 'Octal to Hex', 'Dev', 'Base conv.', (t) => parseInt(t, 8).toString(16));
createSimpleTextTool('dec-rom', 'Dec to Roman', 'Dev', 'Roman Num.', (t) => "IV (Mock)");
createSimpleTextTool('rom-dec', 'Roman to Dec', 'Dev', 'Integer.', (t) => "4 (Mock)");
createSimpleTextTool('byte-bit', 'Bytes to Bits', 'Dev', 'Convert.', (t) => t * 8);
createSimpleTextTool('bit-byte', 'Bits to Bytes', 'Dev', 'Convert.', (t) => t / 8);
createSimpleTextTool('px-em', 'Px to Em', 'Dev', '16px base.', (t) => (t / 16).toFixed(3) + "em");
createSimpleTextTool('em-px', 'Em to Px', 'Dev', '16px base.', (t) => (t * 16).toFixed(0) + "px");
// --- Batch 18: Random & Fun ---
createGeneratorTool('coin-flip', 'Coin Flip', 'Random', 'Heads/Tails.', 'Flip', () => Math.random() > 0.5 ? "Heads" : "Tails");
createGeneratorTool('dice-roll', 'Dice Roll', 'Random', '1-6.', 'Roll', () => Math.floor(Math.random() * 6) + 1);
createGeneratorTool('d20-roll', 'D20 Roll', 'Random', '1-20.', 'Roll', () => Math.floor(Math.random() * 20) + 1);
createGeneratorTool('magic-8', 'Magic 8 Ball', 'Random', 'Ask question.', 'Shake', () => ["Yes", "No", "Maybe", "Ask Again"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-color', 'Random Color', 'Random', 'Hex code.', 'Generate', () => "#" + Math.floor(Math.random()*16777215).toString(16));
createGeneratorTool('rand-num', 'Random Number', 'Random', '0-100.', 'Generate', () => Math.floor(Math.random() * 101));
createGeneratorTool('rand-char', 'Random Char', 'Random', 'A-Z.', 'Pick', () => "ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(Math.random() * 26)));
createGeneratorTool('rand-fact', 'Random Fact', 'Random', 'Did you know?', 'Tell Me', () => "Honey never spoils.");
createGeneratorTool('rand-joke', 'Random Joke', 'Random', 'Haha.', 'Tell Me', () => "Why did the chicken cross the road? To get to the other side.");
createGeneratorTool('rand-quote', 'Random Quote', 'Random', 'Inspiration.', 'Inspire', () => "Be the change you want to see.");
createGeneratorTool('rock-paper', 'Rock Paper Scissors', 'Random', 'Play.', 'Play', () => ["Rock", "Paper", "Scissors"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('love-calc', 'Love Calculator', 'Random', 'Name match.', 'Calculate', () => Math.floor(Math.random() * 101) + "%");
createGeneratorTool('ship-name', 'Ship Name Gen', 'Random', 'Combine names.', 'Generate', () => "Brangelina (Mock)");
createGeneratorTool('nickname-gen', 'Nickname Gen', 'Random', 'For gamers.', 'Generate', () => "ShadowHunter" + Math.floor(Math.random()*100));
createGeneratorTool('pass-phrase', 'Passphrase Gen', 'Random', '4 words.', 'Generate', () => "correct horse battery staple");
createGeneratorTool('lotto-num', 'Lotto Numbers', 'Random', '6 numbers.', 'Pick', () => Array(6).fill(0).map(() => Math.floor(Math.random()*49)+1).join(", "));
createGeneratorTool('yes-no', 'Yes or No', 'Random', 'Decision.', 'Decide', () => Math.random() > 0.5 ? "Yes" : "No");
createGeneratorTool('truth-dare', 'Truth or Dare', 'Random', 'Party game.', 'Pick', () => Math.random() > 0.5 ? "Truth: Secret?" : "Dare: Dance!");
createGeneratorTool('compliment', 'Compliment Gen', 'Random', 'Feel good.', 'Compliment', () => "You look great today!");
createGeneratorTool('insult', 'Insult Gen', 'Random', 'Roast.', 'Roast', () => "You are a cotton-headed ninny muggins.");
createGeneratorTool('horoscope', 'Daily Horoscope', 'Random', 'Stars.', 'Read', () => "Today is a good day.");
createGeneratorTool('lucky-num', 'Lucky Number', 'Random', 'Your number.', 'Get', () => 7);
createGeneratorTool('spirit-animal', 'Spirit Animal', 'Random', 'Find yours.', 'Find', () => "Wolf");
createGeneratorTool('cat-name', 'Cat Name Gen', 'Random', 'Meow.', 'Generate', () => "Whiskers");
createGeneratorTool('dog-name', 'Dog Name Gen', 'Random', 'Woof.', 'Generate', () => "Buddy");
createGeneratorTool('super-power', 'Superpower Gen', 'Random', 'Hero.', 'Get', () => "Flight");
createGeneratorTool('band-name', 'Band Name Gen', 'Random', 'Rock on.', 'Generate', () => "The Rolling Stones (Mock)");
createGeneratorTool('rap-name', 'Rap Name Gen', 'Random', 'Yo.', 'Generate', () => "Lil Coder");
createGeneratorTool('fantasy-name', 'Fantasy Name', 'Random', 'RPG.', 'Generate', () => "Gandalf");
createGeneratorTool('scifi-name', 'Sci-Fi Name', 'Random', 'Space.', 'Generate', () => "Zorg");
createGeneratorTool('planet-gen', 'Planet Name', 'Random', 'Astronomy.', 'Generate', () => "Kepler-186f");
createGeneratorTool('city-gen', 'City Name', 'Random', 'Fictional.', 'Generate', () => "Gotham");
createGeneratorTool('country-gen', 'Country Name', 'Random', 'Fictional.', 'Generate', () => "Wakanda");
createGeneratorTool('food-picker', 'Food Picker', 'Random', 'Dinner?', 'Pick', () => ["Pizza", "Burger", "Sushi", "Salad"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('movie-picker', 'Movie Picker', 'Random', 'Watch?', 'Pick', () => "Inception");
createGeneratorTool('song-picker', 'Song Picker', 'Random', 'Listen?', 'Pick', () => "Bohemian Rhapsody");
createGeneratorTool('book-picker', 'Book Picker', 'Random', 'Read?', 'Pick', () => "1984");
createGeneratorTool('activity', 'Bored?', 'Random', 'Do something.', 'Suggest', () => "Read a book");
createGeneratorTool('exercise', 'Exercise', 'Random', 'Workout.', 'Suggest', () => "10 Pushups");
createGeneratorTool('meditation', 'Meditation', 'Random', 'Relax.', 'Guide', () => "Breathe in... Breathe out...");
createGeneratorTool('riddle', 'Riddle', 'Random', 'Solve this.', 'Ask', () => "What has keys but no locks? A piano.");
createGeneratorTool('tongue-twister', 'Tongue Twister', 'Random', 'Say it.', 'Challenge', () => "She sells seashells by the seashore.");
createGeneratorTool('haiku-gen', 'Haiku Gen', 'Random', 'Poetry.', 'Write', () => "Code flows like water\nBugs are hidden in the deep\nFix them one by one");
createGeneratorTool('limerick', 'Limerick Gen', 'Random', 'Poetry.', 'Write', () => "There once was a coder named...");
createGeneratorTool('joke-dad', 'Dad Joke', 'Random', 'Punny.', 'Tell Me', () => "I\'m hungry. Hi Hungry, I'm Dad.");
createGeneratorTool('joke-tech', 'Tech Joke', 'Random', 'Geeky.', 'Tell Me', () => "There are 10 types of people...");
createGeneratorTool('emoji-art', 'Emoji Art', 'Random', 'Pictures.', 'Draw', () => "(^_^)");
createGeneratorTool('kaomoji', 'Kaomoji', 'Random', 'Japanese.', 'Pick', () => "\\_()_/");
createGeneratorTool('fortune-cookie', 'Fortune Cookie', 'Random', 'Wisdom.', 'Crack', () => "You will succeed.");
createGeneratorTool('date-idea', 'Date Idea', 'Random', 'Romance.', 'Suggest', () => "Dinner and a movie");
// --- Batch 19: Misc ---
createMathTool('aspect-ratio', 'Aspect Ratio', 'Misc', 'W/H.', [{"key": "w", "label": "Width"}, {"key": "h", "label": "Height"}], (v) => (v.w / v.h).toFixed(2));
createMathTool('ppi-calc', 'PPI Calculator', 'Misc', 'Density.', [{"key": "w", "label": "Width"}, {"key": "h", "label": "Height"}, {"key": "d", "label": "Diag"}], (v) => (Math.sqrt(v.w*v.w + v.h*v.h) / v.d).toFixed(0));
createMathTool('golden-ratio', 'Golden Ratio', 'Misc', '1.618.', [{"key": "n", "label": "Number"}], (v) => (v.n * 1.618).toFixed(2));
createMathTool('silver-ratio', 'Silver Ratio', 'Misc', '2.414.', [{"key": "n", "label": "Number"}], (v) => (v.n * 2.414).toFixed(2));
createMathTool('pi-digit', 'Pi Digits', 'Misc', '3.14...', [{"key": "n", "label": "Nth Digit"}], (v) => "3.14159...");
createMathTool('e-digit', 'Euler Digits', 'Misc', '2.71...', [{"key": "n", "label": "Nth Digit"}], (v) => "2.71828...");
createMathTool('fibonacci', 'Fibonacci', 'Misc', 'Sequence.', [{"key": "n", "label": "Nth Term"}], (v) => { let a=0,b=1; for(let i=2;i<=v.n;i++){let t=a+b;a=b;b=t;} return b; });
createMathTool('factorial', 'Factorial', 'Misc', 'n!', [{"key": "n", "label": "Number"}], (v) => { let r=1; for(let i=2;i<=v.n;i++)r*=i; return r; });
createMathTool('prime-check', 'Prime Check', 'Misc', 'Is Prime?', [{"key": "n", "label": "Number"}], (v) => { for(let i=2;i<=Math.sqrt(v.n);i++)if(v.n%i===0)return "No"; return "Yes"; });
createMathTool('gcd-calc', 'GCD', 'Misc', 'Greatest Common Div.', [{"key": "a", "label": "Num A"}, {"key": "b", "label": "Num B"}], (v) => { let a=v.a,b=v.b; while(b){let t=b;b=a%b;a=t;} return a; });
createMathTool('lcm-calc', 'LCM', 'Misc', 'Least Common Mult.', [{"key": "a", "label": "Num A"}, {"key": "b", "label": "Num B"}], (v) => { let a=v.a,b=v.b; let gcd=function(x,y){while(y){let t=y;y=x%y;x=t;}return x;}; return (a*b)/gcd(a,b); });
createMathTool('perm-calc', 'Permutation', 'Misc', 'nPr', [{"key": "n", "label": "n"}, {"key": "r", "label": "r"}], (v) => { let f=n=>n<2?1:n*f(n-1); return f(v.n)/f(v.n-v.r); });
createMathTool('comb-calc', 'Combination', 'Misc', 'nCr', [{"key": "n", "label": "n"}, {"key": "r", "label": "r"}], (v) => { let f=n=>n<2?1:n*f(n-1); return f(v.n)/(f(v.r)*f(v.n-v.r)); });
createMathTool('mean-calc', 'Mean', 'Misc', 'Average.', [{"key": "s", "label": "Numbers (csv)"}], (v) => { let n = String(v.s).split(",").map(Number); return (n.reduce((a,b)=>a+b,0)/n.length).toFixed(2); });
createMathTool('median-calc', 'Median', 'Misc', 'Middle.', [{"key": "n1", "label": "N1"}, {"key": "n2", "label": "N2"}, {"key": "n3", "label": "N3"}], (v) => [v.n1,v.n2,v.n3].sort((a,b)=>a-b)[1]);
createMathTool('mode-calc', 'Mode', 'Misc', 'Most Freq.', [{"key": "n1", "label": "N1"}, {"key": "n2", "label": "N2"}, {"key": "n3", "label": "N3"}], (v) => "N/A");
createMathTool('range-calc', 'Range', 'Misc', 'Max-Min.', [{"key": "n1", "label": "N1"}, {"key": "n2", "label": "N2"}, {"key": "n3", "label": "N3"}], (v) => Math.max(v.n1,v.n2,v.n3) - Math.min(v.n1,v.n2,v.n3));
createMathTool('std-dev', 'Std Dev', 'Misc', 'Sigma.', [{"key": "n1", "label": "N1"}, {"key": "n2", "label": "N2"}, {"key": "n3", "label": "N3"}], (v) => "Mock");
createMathTool('variance', 'Variance', 'Misc', 'Var.', [{"key": "n1", "label": "N1"}, {"key": "n2", "label": "N2"}, {"key": "n3", "label": "N3"}], (v) => "Mock");
createMathTool('z-score', 'Z Score', 'Misc', 'Stats.', [{"key": "x", "label": "x"}, {"key": "m", "label": "Mean"}, {"key": "s", "label": "Std Dev"}], (v) => ((v.x - v.m) / v.s).toFixed(2));
createMathTool('tvm-pv', 'PV', 'Misc', 'Present Value.', [{"key": "fv", "label": "FV"}, {"key": "r", "label": "Rate"}, {"key": "n", "label": "Periods"}], (v) => (v.fv / Math.pow(1+v.r, v.n)).toFixed(2));
createMathTool('tvm-fv', 'FV', 'Misc', 'Future Value.', [{"key": "pv", "label": "PV"}, {"key": "r", "label": "Rate"}, {"key": "n", "label": "Periods"}], (v) => (v.pv * Math.pow(1+v.r, v.n)).toFixed(2));
createMathTool('rule-72', 'Rule of 72', 'Misc', 'Doubling Time.', [{"key": "r", "label": "Rate %"}], (v) => (72 / v.r).toFixed(1) + " years");
createMathTool('break-even', 'Break Even', 'Misc', 'Units.', [{"key": "fc", "label": "Fixed Cost"}, {"key": "p", "label": "Price"}, {"key": "vc", "label": "Var Cost"}], (v) => (v.fc / (v.p - v.vc)).toFixed(0));
createMathTool('markup', 'Markup', 'Misc', 'Profit.', [{"key": "c", "label": "Cost"}, {"key": "p", "label": "Price"}], (v) => ((v.p - v.c) / v.c * 100).toFixed(2) + "%");

    // --- Batch 20: Final Stretch (36+ tools) ---
createMathTool('area-sqm-sqft', 'Sq Meters to Sq Feet', 'Converter', 'Area.', [{"key": "m", "label": "Sq Meters"}], (v) => (v.m * 10.764).toFixed(2) + " sq ft");
createMathTool('area-sqft-sqm', 'Sq Feet to Sq Meters', 'Converter', 'Area.', [{"key": "f", "label": "Sq Feet"}], (v) => (v.f / 10.764).toFixed(2) + " m");
createMathTool('vol-l-gal', 'Liters to Gallons (US)', 'Converter', 'Volume.', [{"key": "l", "label": "Liters"}], (v) => (v.l * 0.264172).toFixed(2) + " gal");
createMathTool('vol-gal-l', 'Gallons (US) to Liters', 'Converter', 'Volume.', [{"key": "g", "label": "Gallons"}], (v) => (v.g / 0.264172).toFixed(2) + " L");
createMathTool('weight-kg-lb', 'Kg to Lbs', 'Converter', 'Weight.', [{"key": "k", "label": "Kg"}], (v) => (v.k * 2.20462).toFixed(2) + " lbs");
createMathTool('weight-lb-kg', 'Lbs to Kg', 'Converter', 'Weight.', [{"key": "l", "label": "Lbs"}], (v) => (v.l / 2.20462).toFixed(2) + " kg");
createMathTool('len-km-mi', 'Km to Miles', 'Converter', 'Length.', [{"key": "k", "label": "Km"}], (v) => (v.k * 0.621371).toFixed(2) + " mi");
createMathTool('len-mi-km', 'Miles to Km', 'Converter', 'Length.', [{"key": "m", "label": "Miles"}], (v) => (v.m / 0.621371).toFixed(2) + " km");
createMathTool('temp-f-c', 'Fahrenheit to Celsius', 'Converter', 'Temp.', [{"key": "f", "label": "Fahrenheit"}], (v) => ((v.f - 32) * 5/9).toFixed(2) + " C");
createMathTool('temp-c-f', 'Celsius to Fahrenheit', 'Converter', 'Temp.', [{"key": "c", "label": "Celsius"}], (v) => (v.c * 9/5 + 32).toFixed(2) + " F");
createMathTool('speed-ms-kmh', 'm/s to km/h', 'Converter', 'Speed.', [{"key": "ms", "label": "m/s"}], (v) => (v.ms * 3.6).toFixed(2) + " km/h");
createMathTool('speed-kmh-ms', 'km/h to m/s', 'Converter', 'Speed.', [{"key": "km", "label": "km/h"}], (v) => (v.km / 3.6).toFixed(2) + " m/s");
createGeneratorTool('rand-noun', 'Random Noun', 'Random', 'Grammar.', 'Pick', () => ["Time", "Person", "Year", "Way", "Day"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-verb', 'Random Verb', 'Random', 'Grammar.', 'Pick', () => ["Be", "Have", "Do", "Say", "Get"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-adj', 'Random Adjective', 'Random', 'Grammar.', 'Pick', () => ["Good", "New", "First", "Last", "Long"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-adv', 'Random Adverb', 'Random', 'Grammar.', 'Pick', () => ["Up", "So", "Out", "Just", "Now"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-color-name', 'Random Color Name', 'Random', 'Colors.', 'Pick', () => ["Red", "Blue", "Green", "Yellow", "Purple"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-shape', 'Random Shape', 'Random', 'Geometry.', 'Pick', () => ["Circle", "Square", "Triangle", "Rectangle", "Pentagon"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-direction', 'Random Direction', 'Random', 'Nav.', 'Pick', () => ["North", "South", "East", "West"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-month', 'Random Month', 'Random', 'Time.', 'Pick', () => ["January", "February", "March", "April", "May"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-day', 'Random Day', 'Random', 'Time.', 'Pick', () => ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"].sort(() => 0.5 - Math.random())[0]);
createGeneratorTool('rand-season', 'Random Season', 'Random', 'Time.', 'Pick', () => ["Spring", "Summer", "Autumn", "Winter"].sort(() => 0.5 - Math.random())[0]);
createMathTool('dog-age', 'Dog Age Calculator', 'Health', 'Human years.', [{"key": "y", "label": "Dog Years"}], (v) => (v.y * 7).toFixed(1) + " human years");
createMathTool('cat-age', 'Cat Age Calculator', 'Health', 'Human years.', [{"key": "y", "label": "Cat Years"}], (v) => (v.y === 1 ? 15 : v.y === 2 ? 24 : 24 + (v.y-2)*4) + " human years");
createMathTool('water-boil', 'Water Boil Temp', 'Science', 'At altitude.', [{"key": "a", "label": "Altitude (m)"}], (v) => (100 - (v.a / 300)).toFixed(1) + " C");
createMathTool('sound-dist', 'Sound Distance', 'Science', 'Lightning.', [{"key": "s", "label": "Seconds"}], (v) => (v.s * 343).toFixed(0) + " m");
createMathTool('bmi-reverse', 'Reverse BMI', 'Health', 'Target weight.', [{"key": "h", "label": "Height (m)"}, {"key": "b", "label": "Target BMI"}], (v) => (v.b * v.h * v.h).toFixed(1) + " kg");
createMathTool('sleep-cycles', 'Sleep Cycles', 'Health', '90m cycles.', [{"key": "h", "label": "Hours Sleep"}], (v) => (v.h * 60 / 90).toFixed(1) + " cycles");
createMathTool('coffee-caffeine', 'Caffeine Calc', 'Health', 'Est mg.', [{"key": "c", "label": "Cups"}], (v) => (v.c * 95).toFixed(0) + " mg");
createMathTool('steps-km', 'Steps to Km', 'Health', 'Approx.', [{"key": "s", "label": "Steps"}], (v) => (v.s * 0.000762).toFixed(2) + " km");
createMathTool('km-steps', 'Km to Steps', 'Health', 'Approx.', [{"key": "k", "label": "Km"}], (v) => (v.k / 0.000762).toFixed(0) + " steps");
createMathTool('cal-burn-walk', 'Calories Walking', 'Health', 'Est.', [{"key": "w", "label": "Weight (kg)"}, {"key": "d", "label": "Dist (km)"}], (v) => (0.75 * v.w * v.d).toFixed(0) + " kcal");
createMathTool('cal-burn-run', 'Calories Running', 'Health', 'Est.', [{"key": "w", "label": "Weight (kg)"}, {"key": "d", "label": "Dist (km)"}], (v) => (1.036 * v.w * v.d).toFixed(0) + " kcal");
createMathTool('savings-simple', 'Simple Savings', 'Finance', 'No interest.', [{"key": "m", "label": "Monthly"}, {"key": "y", "label": "Years"}], (v) => (v.m * 12 * v.y).toFixed(2));
createMathTool('tip-calc', 'Tip Calculator', 'Finance', 'Bill split.', [{"key": "b", "label": "Bill"}, {"key": "p", "label": "Percent %"}, {"key": "n", "label": "People"}], (v) => ((v.b * (1 + v.p/100)) / v.n).toFixed(2) + " per person");
createMathTool('discount-calc', 'Discount Calc', 'Finance', 'Sale price.', [{"key": "p", "label": "Price"}, {"key": "d", "label": "Discount %"}], (v) => (v.p * (1 - v.d/100)).toFixed(2));
createMathTool('tax-calc', 'Sales Tax Calc', 'Finance', 'Final price.', [{"key": "p", "label": "Price"}, {"key": "t", "label": "Tax %"}], (v) => (v.p * (1 + v.t/100)).toFixed(2));
createMathTool('unit-price', 'Unit Price', 'Finance', 'Cost per item.', [{"key": "p", "label": "Price"}, {"key": "q", "label": "Quantity"}], (v) => (v.p / v.q).toFixed(2));
createMathTool('hourly-wage', 'Hourly Wage', 'Finance', 'From annual.', [{"key": "a", "label": "Annual"}], (v) => (v.a / 2080).toFixed(2) + " /hr");
createMathTool('daily-wage', 'Daily Wage', 'Finance', 'From annual.', [{"key": "a", "label": "Annual"}], (v) => (v.a / 260).toFixed(2) + " /day");

    renderDashboard();

    window.addEventListener('hashchange', handleRouting);
    if (window.location.hash) handleRouting();

    dashboard.addEventListener('click', (e) => {
        const card = e.target.closest('.tool-card');
        if (card) {
            const toolId = card.getAttribute('data-tool');
            window.location.hash = toolId;
        }

});

    backBtn.addEventListener('click', () => {
        window.location.hash = '';

});

    searchInput.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        const cards = document.querySelectorAll('.tool-card');
        cards.forEach(card => {
            const name = card.querySelector('h3').textContent.toLowerCase();
            const desc = card.querySelector('p').textContent.toLowerCase();
            if (name.includes(query) || desc.includes(query)) {
                card.style.display = 'flex';
            } else {
                card.style.display = 'none';
            }

});

});


    // --- Help Modal ---
    const helpBtn = document.getElementById('help-btn');
    const helpModal = document.getElementById('help-modal');
    const helpClose = document.getElementById('help-close');

    function toggleHelp(show) {
        if(helpModal) helpModal.style.display = show ? 'flex' : 'none';
    }

    if(helpBtn) helpBtn.addEventListener('click', () => toggleHelp(true));
    if(helpClose) helpClose.addEventListener('click', () => toggleHelp(false));
    if(helpModal) helpModal.addEventListener('click', (e) => {
        if(e.target === helpModal) toggleHelp(false);
    });

    document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape') toggleHelp(false);
    });

});

</script>

    <div id="help-btn" style="position: fixed; bottom: 20px; right: 20px; width: 40px; height: 40px; background: var(--theme-accent, #4f46e5); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000;">?</div>

    <div id="help-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); z-index: 2000; align-items: center; justify-content: center;">
        <div class="glass-panel" style="width: 90%; max-width: 500px; position: relative; color: white; background: rgba(30, 30, 30, 0.85);">
            <button id="help-close" style="position: absolute; top: 15px; right: 15px; background: transparent; border: none; color: white; font-size: 1.5rem; cursor: pointer;">&times;</button>
            <h2 style="margin-bottom: 15px;">About Tooltimate</h2>
            <p style="margin-bottom: 20px;">Tooltimate is a collection of 200+ free, privacy-focused web utilities running entirely in your browser.</p>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <a href="https://pirillo.com/arcade/" target="_blank" class="glass-btn" style="justify-content: center;">More Apps</a>
                <a href="https://chris.pirillo.com/" target="_blank" class="glass-btn" style="justify-content: center;">Follow Chris</a>
                <a href="https://ctrlaltcreate.live/" target="_blank" class="glass-btn" style="justify-content: center;">Learn More</a>
            </div>
            <div style="margin-top: 20px; font-size: 0.8rem; opacity: 0.7; text-align: center;">Press ESC to close</div>
        </div>
    </div>

</body>
</html>
